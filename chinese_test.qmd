---
title: "中文显示测试"
---

```{r setup, include=FALSE}
source("R/setup_common.R")
```

## 中文字体测试

本文档用于测试中文字体在R图形和Quarto文档中的显示效果。

### 基本文本测试

这是普通的中文文本，应该能够正常显示。

### ggplot2 中文测试

下面我们测试ggplot2图形中的中文显示：

```{r}
library(ggplot2)

# 创建一个包含中文的简单数据框
df <- data.frame(
  类别 = c("苹果", "香蕉", "橙子", "葡萄", "西瓜"),
  数量 = c(25, 30, 15, 20, 10)
)

# 绘制简单条形图
ggplot(df, aes(x = 类别, y = 数量, fill = 类别)) +
  geom_col() +
  labs(
    title = "水果数量统计",
    subtitle = "各类水果的数量比较",
    x = "水果类别",
    y = "数量(个)",
    fill = "水果种类"
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

### 复杂图表中文测试

下面测试更复杂的图表中文显示：

```{r}
# 创建一个包含多个变量的数据集
set.seed(42)
df2 <- expand.grid(
  季度 = c("第一季度", "第二季度", "第三季度", "第四季度"),
  产品 = c("手机", "电脑", "平板", "耳机")
)
df2$销量 <- round(runif(nrow(df2), 100, 500))
df2$利润 <- df2$销量 * runif(nrow(df2), 0.1, 0.3)

# 绘制分组柱状图
ggplot(df2, aes(x = 季度, y = 销量, fill = 产品)) +
  geom_col(position = "dodge") +
  labs(
    title = "不同季度各产品销量",
    subtitle = "2023年销售数据",
    x = "季度",
    y = "销量(台)",
    fill = "产品类型"
  ) +
  theme(
    legend.position = "top",
    plot.title = element_text(hjust = 0.5),
    plot.subtitle = element_text(hjust = 0.5)
  )

# 绘制散点图
ggplot(df2, aes(x = 销量, y = 利润, color = 产品, shape = 季度)) +
  geom_point(size = 3, alpha = 0.8) +
  labs(
    title = "销量与利润关系图",
    subtitle = "按产品和季度分组",
    x = "销量(台)",
    y = "利润(万元)",
    color = "产品类型",
    shape = "季度"
  )
```

### 使用facet的复杂图表

```{r}
# 使用facet分面
ggplot(df2, aes(x = 季度, y = 销量, fill = 产品)) +
  geom_col() +
  facet_wrap(~ 产品, ncol = 2) +
  labs(
    title = "各产品在不同季度的销量",
    x = "季度",
    y = "销量(台)"
  ) +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    strip.text = element_text(size = 12)
  )
``` 