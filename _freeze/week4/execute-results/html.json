{
  "hash": "a2d1a0fafa73e01d7605b02529538b1c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"第四周：推断性统计初步：参数估计与假设检验\"\n---\n\n\n\n\n\n\n\n::: {.callout-tip appearance=\"simple\"}\n## 本周学习目标\n\n*   理解**推断统计**的基本思想，区分**描述统计**和**推断统计**\n*   掌握**参数估计**的基本方法，包括**点估计**和**区间估计**\n*   理解**置信区间**的概念和意义，能够**手动计算**均值的置信区间\n*   掌握**假设检验**的基本原理和步骤\n*   了解**原假设**、**备择假设**、**显著性水平**、 **p 值**、**效应量**和**检验功效**的含义\n*   学习使用 **t 检验** 检验**总体均值**的假设\n*   能够使用 `t.test()` 函数进行**单样本 t 检验**和**双样本 t 检验**\n*   为**项目一中期汇报**做准备\n\n:::\n\n## 第七次课：参数估计、假设检验原理\n\n::: {.callout-note}\n### 推断统计初步：参数估计\n\n在之前的课程中，我们主要学习了**描述统计**，即如何用图表和统计量**描述样本数据**的特征。从本周开始，我们将进入**推断统计**的学习。推断统计的核心思想是**用样本数据推断总体特征**。\n\n**参数估计**是推断统计的重要内容之一，它的目的是**用样本统计量估计总体参数**。\n:::\n\n#### 描述统计 vs. 推断统计\n\n*   **描述统计 (Descriptive Statistics)**:\n    *   **目的**: 描述和总结样本数据的特征。\n    *   **方法**:  计算描述性统计量 (均值、中位数、标准差等)，绘制图表 (直方图、箱线图、散点图等)。\n    *   **结论**:  结论仅限于样本数据本身，不能推广到总体。\n    *   **例子**:  计算**样本**电影评分的平均分，绘制**样本**电影评分的分布图。\n\n*   **推断统计 (Inferential Statistics)**:\n    *   **目的**:  利用样本数据推断总体特征。\n    *   **方法**:  参数估计 (点估计、区间估计)，假设检验。\n    *   **结论**:  结论可以推广到总体，但存在不确定性。\n    *   **例子**:  用**样本**电影评分的平均分**估计**所有电影的平均评分，检验**总体**电影评分的平均分是否高于某个值。\n\n#### 参数估计的目的\n\n*   **总体 (Population)**:  我们感兴趣的所有个体的集合。例如，所有电影，所有大学生，所有股票。\n*   **参数 (Parameter)**:  描述总体特征的数值，通常是未知的，需要用样本数据估计。例如，总体均值 μ，总体标准差 σ，总体比例 p。\n*   **样本 (Sample)**:  从总体中随机抽取的一部分个体。\n*   **统计量 (Statistic)**:  描述样本特征的数值，可以根据样本数据计算得到，用于估计总体参数。例如，样本均值 $\\bar{x}$，样本标准差 s，样本比例 $\\hat{p}$。\n*   **参数估计 (Parameter Estimation)**:  **用样本统计量估计总体参数** 的过程。\n\n    *   **点估计 (Point Estimation)**:  用一个样本统计量的值作为总体参数的估计值。\n    *   **区间估计 (Interval Estimation)**:  给出一个总体参数的可能取值范围，通常以置信区间的形式呈现。\n\n#### 点估计 (Point Estimation)\n\n*   **点估计**:  用一个样本统计量的值直接作为总体参数的估计值。\n    *   用**样本均值 $\\bar{x}$ 估计总体均值 μ**。\n    *   用**样本比例 $\\hat{p}$ 估计总体比例 p**。\n    *   用**样本标准差 s 估计总体标准差 σ**。\n\n*   **常用点估计量**:\n    *   **样本均值 $\\bar{x}$**:  总体均值 μ 的点估计。\n    *   **样本中位数 Median**:  总体中位数的点估计。\n    *   **样本标准差 s**:  总体标准差 σ 的点估计。\n    *   **样本比例 $\\hat{p}$**:  总体比例 p 的点估计。\n\n*   **点估计量的评价标准** (概念性了解):\n    *   **无偏性 (Unbiasedness)**:  估计量的期望值等于总体参数的真值。\n    *   **有效性 (Efficiency)**:  对于同一个总体参数，多个无偏估计量中，方差最小的估计量更有效。\n    *   **一致性 (Consistency)**:  随着样本量增大，估计量的值越来越接近总体参数的真值。\n\n*   **R 语言实现点估计**:  使用 R 函数直接计算样本统计量，作为总体参数的点估计值。\n\n\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # 示例数据 (电影评分)\n    movie_ratings <- c(4.5, 4.2, 3.8, 4.7, 4.0, 4.3, 3.9, 4.6, 4.1, 4.4)\n    \n    # 计算样本均值 (点估计总体均值)\n    mean_rating_point_estimate <- mean(movie_ratings)\n    mean_rating_point_estimate\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    [1] 4.25\n    ```\n    \n    \n    :::\n    \n    ```{.r .cell-code}\n    # 计算样本标准差 (点估计总体标准差)\n    sd_rating_point_estimate <- sd(movie_ratings)\n    sd_rating_point_estimate\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    [1] 0.302765\n    ```\n    \n    \n    :::\n    \n    ```{.r .cell-code}\n    # 计算样本中位数 (点估计总体中位数)\n    median_rating_point_estimate <- median(movie_ratings)\n    median_rating_point_estimate\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    [1] 4.25\n    ```\n    \n    \n    :::\n    :::\n\n\n\n\n\n#### 区间估计 (Interval Estimation)\n\n*   **为什么需要区间估计？**:  **点估计存在误差**。点估计只给出一个具体的数值，无法反映估计的精确程度。**区间估计提供一个参数的可能取值范围，并给出置信水平，能够反映估计的不确定性**。\n\n*   **置信区间 (Confidence Interval, CI)**:  **由样本数据计算出的，包含总体参数真值的可能性为 $(1-\\alpha)$ 的区间**。\n\n    *   **置信水平 (Confidence Level, $1-\\alpha$)**:  表示置信区间包含总体参数真值的**概率**。常用的置信水平为 95% ( $\\alpha = 0.05$ ) 和 99% ( $\\alpha = 0.01$ )。\n    *   **置信区间的宽度**:  置信区间的**上限减去下限**。宽度越小，估计越精确。\n\n*   **影响置信区间宽度的因素**:\n    *   **样本量 (n)**:  样本量越大，置信区间越窄。\n    *   **置信水平 ($1-\\alpha$)**:  置信水平越高，置信区间越宽。\n    *   **总体标准差 (σ) 或样本标准差 (s)**:  标准差越大，置信区间越宽。\n\n*   **正态分布的置信区间 (总体均值 μ 的置信区间)**:\n\n    *   **已知总体标准差 σ 或大样本情况 (n ≥ 30)**，可以使用 **Z 分布** 构建置信区间。\n    *   总体均值 μ 的 $(1-\\alpha)$ 置信区间为:\n        $$\n        \\bar{x} \\pm Z_{\\alpha/2} \\frac{\\sigma}{\\sqrt{n}}\n        $$\n        其中，$\\bar{x}$ 为样本均值，$\\sigma$ 为总体标准差 (或用样本标准差 s 近似)，n 为样本量，$Z_{\\alpha/2}$ 为标准正态分布的 $1-\\alpha/2$ 分位数。\n\n    *   **未知总体标准差 σ 且小样本情况 (n < 30)**，如果总体服从**正态分布**，可以使用 **t 分布** 构建置信区间。\n    *   总体均值 μ 的 $(1-\\alpha)$ 置信区间为:\n        $$\n        \\bar{x} \\pm t_{\\alpha/2, n-1} \\frac{s}{\\sqrt{n}}\n        $$\n        其中，$\\bar{x}$ 为样本均值，s 为样本标准差，n 为样本量，$t_{\\alpha/2, n-1}$ 为自由度为 n-1 的 t 分布的 $t_{\\alpha/2, n-1}$ 分位数。\n\n    *   **R 语言实现区间估计**:  手动计算置信区间的公式。\n\n\n\n\n\n        ::: {.cell}\n        \n        ```{.r .cell-code}\n        # 示例数据 (电影评分)\n        movie_ratings <- c(4.5, 4.2, 3.8, 4.7, 4.0, 4.3, 3.9, 4.6, 4.1, 4.4)\n        sample_mean <- mean(movie_ratings)\n        sample_sd <- sd(movie_ratings)\n        sample_size <- length(movie_ratings)\n        confidence_level <- 0.95\n        alpha <- 1 - confidence_level\n        \n        # 查 t 分布临界值 (双尾)\n        t_critical <- qt(1 - alpha/2, df = sample_size - 1)\n        \n        # 计算标准误差 (Standard Error, SE)\n        standard_error <- sample_sd / sqrt(sample_size)\n        \n        # 计算边际误差 (Margin of Error, ME)\n        margin_of_error <- t_critical * standard_error\n        \n        # 计算置信区间\n        confidence_interval <- c(sample_mean - margin_of_error, sample_mean + margin_of_error)\n        confidence_interval\n        ```\n        \n        ::: {.cell-output .cell-output-stdout}\n        \n        ```\n        [1] 4.033415 4.466585\n        ```\n        \n        \n        :::\n        \n        ```{.r .cell-code}\n        # 解释置信区间\n        cat(paste(\"总体均值\", confidence_level*100, \"% 的置信区间为:\",\n                  round(confidence_interval[1], 2), \"到\", round(confidence_interval[2], 2)))\n        ```\n        \n        ::: {.cell-output .cell-output-stdout}\n        \n        ```\n        总体均值 95 % 的置信区间为: 4.03 到 4.47\n        ```\n        \n        \n        :::\n        :::\n\n\n\n\n\n*   **参数估计练习**:\n    *   **练习任务**： 提供一个示例数据集 (例如，电影评分数据)。\n    *   **计算样本均值和样本标准差，作为总体均值和总体标准差的点估计值。**\n    *   **手动计算总体均值的 95% 和 99% 置信区间 (假设总体服从正态分布，使用样本标准差近似总体标准差)。**\n    *   **解释置信区间的含义。**\n    *   **鼓励学生使用AI工具 (如Cursor) 辅助公式计算和R代码编写。**  例如，让AI生成计算置信区间的R代码，或者解释置信区间的公式。\n\n::: {.callout-tip}\n## 交互式演示：置信区间\n\n为了帮助理解置信区间的概念，我们提供了一个交互式的Shiny应用程序 [`confidence_interval_demo.R`](code/week4/confidence_interval_demo.R)。这个程序演示了影响置信区间宽度的三个主要因素：\n\n- 样本量 (n)：样本量越大，置信区间越窄\n- 置信水平 (1-α)：置信水平越高，置信区间越宽\n- 总体标准差 (σ)：标准差越大，置信区间越宽\n\n运行方法：\n```R\nshiny::runApp(\"code/week4/confidence_interval_demo.R\")\n```\n\n通过调整这些参数，你可以直观地观察它们对置信区间宽度的影响。\n:::\n\n::: {.callout-note}\n### 推断统计初步：假设检验\n\n**假设检验 (Hypothesis Testing)** 是推断统计的另一个重要内容。它的目的是**检验关于总体参数的假设是否成立**。\n:::\n\n#### 假设检验的目的\n\n*   **研究问题**:  研究者通常会针对某个总体参数提出一个假设，例如：\n    *   某电影类型的平均评分是否高于 4.0 分？\n    *   不同类型电影的平均评分是否相等？\n    *   广告投放后，产品销量是否显著增加？\n\n*   **假设检验的目的**:  **通过样本数据提供的证据，判断提出的假设是否合理**。\n\n#### 假设检验的基本思想\n\n*   **反证法**:  先提出一个与研究目的相反的假设 (**原假设**)，然后**试图用样本数据反驳原假设**。\n*   **小概率事件原理**:  如果原假设成立，**某个事件发生的概率很小 (小概率事件)**，但在一次试验中，**该事件竟然发生了**，那么我们就有理由**怀疑原假设的真实性，从而拒绝原假设**。\n*   **逻辑**:\n    *   **假设 $H_0$ 成立 (原假设)**  $\\Rightarrow$  **小概率事件 A 发生**  $\\Rightarrow$  **拒绝 $H_0$**。\n\n#### 假设检验的步骤\n\n1.  **提出原假设 (Null Hypothesis, $H_0$) 和备择假设 (Alternative Hypothesis, $H_1$)**。\n2.  **选择检验统计量 (Test Statistic)**。\n3.  **确定显著性水平 (Significance Level, $\\alpha$, 例如 0.05, 0.01)**。\n4.  **计算检验统计量的 p 值 (p-value)**。\n5.  **做出决策：**  如果 p-value $\\leq \\alpha$，**拒绝原假设 $H_0$，接受备择假设 $H_1$**；如果 p-value $> \\alpha$，**不拒绝原假设 $H_0$**。\n\n#### 原假设 ($H_0$) 和备择假设 ($H_1$)\n\n*   **原假设 ($H_0$)**:  **研究者想要检验的假设，通常是\"没有效应\"、\"没有差异\"、\"没有关系\"的假设**。\n    *   例如： 总体均值等于某个特定值 ($\\mu = \\mu_0$)，两个总体均值相等 ($\\mu_1 = \\mu_2$)，变量之间没有关系 (相关系数为 0)。\n    *   **总是关于总体参数的假设，而不是关于样本统计量的假设**。\n    *   **在假设检验的框架下，总是先假定原假设 $H_0$ 成立**。\n\n*   **备择假设 ($H_1$)**:  **研究者希望证明的假设，通常是\"存在效应\"、\"存在差异\"、\"存在关系\"的假设**。\n    *   例如： 总体均值不等于某个特定值 ($\\mu \\neq \\mu_0$)，总体均值大于某个特定值 ($\\mu > \\mu_0$)，两个总体均值不相等 ($\\mu_1 \\neq \\mu_2$)，变量之间存在关系 (相关系数不为 0)。\n    *   **与原假设 $H_0$ 互斥**，即 $H_0$ 和 $H_1$ 不可能同时成立。\n    *   **备择假设的形式**:\n        *   **双尾检验 (two-tailed test)**:  $H_1: \\mu \\neq \\mu_0$ (不等于)。 检验总体均值是否**不同于**某个特定值，**不关心**是大于还是小于。\n        *   **右尾检验 (right-tailed test)**:  $H_1: \\mu > \\mu_0$ (大于)。 检验总体均值是否**显著大于**某个特定值。\n        *   **左尾检验 (left-tailed test)**:  $H_1: \\mu < \\mu_0$ (小于)。 检验总体均值是否**显著小于**某个特定值。\n    *   **研究者需要根据研究问题和目的，选择合适的备择假设形式**。\n\n*   **原假设和备择假设的设定原则**:\n    *   **互相排斥**:  $H_0$ 和 $H_1$ 必须是互相排斥的，不能同时成立。\n    *   **完备性**:  $H_0$ 和 $H_1$ 应该覆盖所有可能的情况。\n    *   **优先保护原假设**:  在没有充分证据的情况下，我们倾向于**不拒绝原假设 $H_0$**。 只有当样本数据提供**足够强的证据**时，我们才**拒绝 $H_0$，接受 $H_1$**。\n\n#### 显著性水平 ($\\alpha$)\n\n*   **显著性水平 ($\\alpha$)**:  **预先设定的一个概率值，作为判断小概率事件的标准**。\n    *   **常用取值**:  $\\alpha = 0.05$ (5%), $\\alpha = 0.01$ (1%), $\\alpha = 0.10$ (10%)。\n    *   **$\\alpha = 0.05$ 的含义**:  如果原假设 $H_0$ 成立，**拒绝 $H_0$ 的概率为 5%**。 也就是说，在 100 次假设检验中，平均有 5 次会犯**第一类错误 (拒真错误)**。\n    *   **$\\alpha$ 越小，拒绝 $H_0$ 的标准越严格，犯第一类错误的概率越小**。\n    *   **$\\alpha$ 的选择需要根据研究的具体情况和后果来决定**。  一般来说，**探索性研究**可以适当**放宽 $\\alpha$**，**验证性研究**和**高风险决策**需要**严格控制 $\\alpha$**。\n\n#### p 值 (p-value)\n\n*   **p 值 (p-value)**:  **在原假设 $H_0$ 成立的条件下，观察到样本结果或更极端结果的概率**。\n    *   **\"更极端\"**:  指**更有利于备择假设 $H_1$** 的样本结果。  例如，对于右尾检验 ($H_1: \\mu > \\mu_0$)，样本均值 $\\bar{x}$ 越大，就越极端。\n    *   **p 值的意义**:  **衡量样本数据与原假设 $H_0$ 的不一致程度**。  **p 值越小，说明样本数据与原假设 $H_0$ 越不一致，拒绝 $H_0$ 的理由越充分**。\n    *   **p 值是一个概率值，取值范围为 [0, 1]**。\n\n#### 决策规则\n\n*   **比较 p 值和显著性水平 $\\alpha$**:\n    *   如果 **p-value $\\leq \\alpha$**:  **拒绝原假设 $H_0$，接受备择假设 $H_1$**。  结论为**\"在 $\\alpha$ 显著性水平下，拒绝原假设 $H_0\"**，或**\"在 $\\alpha$ 显著性水平下，存在统计学显著的效应/差异/关系\"**。\n    *   如果 **p-value $> \\alpha$**:  **不拒绝原假设 $H_0$**。  结论为**\"在 $\\alpha$ 显著性水平下，不拒绝原假设 $H_0\"**，或**\"在 $\\alpha$ 显著性水平下，没有足够证据拒绝原假设 $H_0\"**，或**\"不能得出统计学显著的效应/差异/关系\"**。\n    *   **注意**:  **\"不拒绝原假设 $H_0\" 不等于 \"接受原假设 $H_0\"**。  我们只能说**没有足够证据拒绝 $H_0\"**，但不能说 $H_0$ 一定成立。  **假设检验只能证伪，不能证真**。\n\n#### 两类错误\n\n*   **第一类错误 (Type I error, 拒真错误)**:  **原假设 $H_0$ 实际上是成立的，但我们却拒绝了 $H_0\"**。\n    *   **概率**:  犯第一类错误的概率为 **$\\alpha$ (显著性水平)**。  这是我们**可以控制**的错误概率。\n    *   **例子**:  本来某电影类型的平均评分**没有**高于 4.0 分 ($H_0$ 成立)，但假设检验结果却**错误地**认为该类型电影的平均评分**高于** 4.0 分 (拒绝 $H_0$)。\n\n*   **第二类错误 (Type II error, 受伪错误)**:  **原假设 $H_0$ 实际上是不成立的，但我们却没有拒绝 $H_0\"**。\n    *   **概率**:  犯第二类错误的概率为 **$\\beta$**，**通常是未知的，难以直接控制**。\n    *   **例子**:  本来某电影类型的平均评分**确实**高于 4.0 分 ($H_0$ 不成立)，但假设检验结果却**错误地**认为该类型电影的平均评分**没有**高于 4.0 分 (不拒绝 $H_0$)。\n\n*   **两类错误的权衡**:\n    *   **$\\alpha$ 和 $\\beta$ 之间存在权衡关系**。  **减小 $\\alpha$ (更严格地拒绝 $H_0$)，会增大 $\\beta$ (更容易犯第二类错误)**； **增大 $\\alpha$ (更宽松地拒绝 $H_0$)，会减小 $\\beta$ (更不容易犯第二类错误)**。\n    *   **在实际研究中，需要根据研究目的和后果，权衡两类错误的重要性，选择合适的 $\\alpha$ 水平**。  一般来说，**更重视控制第一类错误**，通常取 $\\alpha = 0.05$。\n\n#### 效应量 (Effect Size)\n\n*   **效应量 (Effect Size)**:  **反映效应/差异/关系 的真实大小的指标，不受到样本量大小的影响**。\n    *   **与 p 值不同**:  **p 值只反映统计学显著性，不反映效应的实际大小**。  **即使 p 值很小 (统计学显著)，效应量也可能很小 (实际意义不大)**。  **反之，即使 p 值较大 (统计学不显著)，效应量也可能很大 (但由于样本量不足，未能达到统计学显著)**。\n    *   **常用的效应量指标**:\n        *   **Cohen's d**:  用于衡量**两组均值差异**的效应量，常用于 t 检验。  Cohen's d = (Mean1 - Mean2) / Pooled SD。\n        *   **相关系数 r**:  用于衡量**两个变量之间线性关系强度**的效应量，取值范围为 [-1, 1]。\n        *   **R 平方 ($R^2$)**:  用于衡量**回归模型解释变异的比例**的效应量，取值范围为 [0, 1]。\n    *   **效应量大小的解释 (Cohen's d 为例)**:\n        *   **小效应 (small effect)**:  Cohen's d ≈ 0.2\n        *   **中等效应 (medium effect)**:  Cohen's d ≈ 0.5\n        *   **大效应 (large effect)**:  Cohen's d ≈ 0.8\n    *   **效应量的大小解释标准是相对的，需要结合具体的研究领域和背景进行判断**。\n\n#### 检验功效 (Power)\n\n*   **检验功效 (Power, $1-\\beta$)**:  **当备择假设 $H_1$ 实际上成立时，我们正确地拒绝原假设 $H_0$ 的概率**。\n    *   **与第二类错误 ($\\beta$) 的关系**:  Power = $1 - \\beta$。  **Power 越高，犯第二类错误的概率 $\\beta$ 越小**。\n    *   **Power 的意义**:  **衡量假设检验的灵敏度**。  **Power 越高，越容易发现真实存在的效应/差异/关系**。  **Power 太低，即使真实存在效应，也可能由于样本量不足等原因，无法通过假设检验发现 (导致不拒绝 $H_0$)**。\n    *   **一般认为，Power 至少要达到 0.8 (80%) 以上，才能认为检验是有效的**。\n\n*   **影响检验功效的因素**:\n    *   **效应量 (Effect Size)**:  **效应量越大，Power 越高**。效应越大，越容易被检验出来。\n    *   **样本量 (Sample Size, n)**:  **样本量越大，Power 越高**。样本量越大，估计越精确，越容易发现真实效应。\n    *   **显著性水平 ($\\alpha$)**:  **$\\alpha$ 越大，Power 越高**。$\\alpha$ 越大，拒绝 $H_0$ 的标准越宽松，Power 越高，但犯第一类错误的概率也增大。\n    *   **总体标准差 ($\\sigma$)**:  **总体标准差越小，Power 越高**。标准差越小，数据变异性越小，越容易发现真实效应。\n    *   **单尾检验 vs. 双尾检验**:  **单尾检验的 Power 通常高于双尾检验** (在效应方向与检验方向一致时)。\n\n*   **检验功效分析 (Power Analysis)**:  **在研究设计阶段，为了达到一定的 Power 水平，需要计算所需的最小样本量**。\n    *   **先设定期望的 Power 值 (如 0.8)**，以及**预期的效应量大小**、**显著性水平 $\\alpha$**、**总体标准差 (或估计值)**。\n    *   **然后，使用统计软件或公式计算所需的最小样本量**。\n    *   **检验功效分析有助于研究者合理规划研究设计，避免样本量不足导致无法发现真实效应**。\n\n*   **R 语言中进行功效分析**:  可以使用 `pwr` 包进行功效分析。\n\n\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # 安装 pwr 包 (如果未安装)\n    # install.packages(\"pwr\")\n    library(pwr)\n    \n    # 示例：单样本 t 检验的功效分析\n    # 假设：预期效应量 d = 0.5 (中等效应)，显著性水平 alpha = 0.05，期望功效 power = 0.8\n    # 计算所需样本量\n    power_analysis_result <- pwr.t.test(\n      d = 0.5, # 效应量 Cohen's d\n      sig.level = 0.05, # 显著性水平 alpha\n      power = 0.8, # 期望功效\n      type = \"one.sample\", # 单样本 t 检验\n      alternative = \"two.sided\" # 双尾检验\n    )\n    \n    power_analysis_result\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    \n         One-sample t test power calculation \n    \n                  n = 33.36713\n                  d = 0.5\n          sig.level = 0.05\n              power = 0.8\n        alternative = two.sided\n    ```\n    \n    \n    :::\n    \n    ```{.r .cell-code}\n    # 结果解读：\n    # 需要样本量 n 大约为 33.36，向上取整，至少需要 34 个样本。\n    ```\n    :::\n\n\n\n\n\n    *   `pwr.t.test()` 函数可以进行单样本 t 检验、双样本 t 检验 (独立样本和配对样本) 的功效分析。\n    *   常用参数：\n        *   `d`:  效应量 Cohen's d。\n        *   `sig.level`:  显著性水平 $\\alpha$。\n        *   `power`:  功效 $1-\\beta$。\n        *   `n`:  样本量 (如果要计算所需样本量，则此参数留空)。\n        *   `type`:  检验类型，`\"one.sample\"` (单样本 t 检验), `\"two.sample\"` (独立样本 t 检验), `\"paired\"` (配对样本 t 检验)。\n        *   `alternative`:  备择假设类型，`\"two.sided\"`, `\"greater\"`, `\"less\"`。\n\n*   **效应量和检验功效的意义**:\n    *   **更全面地理解假设检验结果**:  除了 p 值，还需要关注效应量和检验功效，才能更完整地评价研究结果。\n    *   **提高研究质量**:  在研究设计阶段进行功效分析，合理确定样本量，提高研究的可靠性和可重复性。\n    *   **避免过度解读 p 值**:  避免仅仅根据 p 值大小判断效应的实际意义，要结合效应量进行判断。\n    *   **科学决策**:  在实际应用中，需要综合考虑效应量、检验功效、研究成本等因素，做出更科学合理的决策。\n\n::: {.callout-tip}\n## 交互式演示：假设检验错误类型\n\n为了帮助理解假设检验中的两类错误，我们提供了一个交互式的Shiny应用程序 [`hypothesis_testing_errors.R`](code/week4/hypothesis_testing_errors.R)。这个程序演示了：\n\n- Type I错误 (α)：错误地拒绝真实的H₀\n- Type II错误 (β)：错误地接受错误的H₀\n- 检验功效 (1-β)：正确拒绝H₀的概率\n\n运行方法：\n```R\nshiny::runApp(\"code/week4/hypothesis_testing_errors.R\")\n```\n\n通过调整参数，你可以观察不同情况下两类错误的概率变化。\n:::\n\n::: {.callout-tip}\n## 交互式演示：检验功效分析\n\n为了帮助理解检验功效分析，我们提供了一个交互式的Shiny应用程序 [`power_analysis_demo.R`](code/week4/power_analysis_demo.R)。这个程序演示了：\n\n- 效应量 (Effect Size)：实际效应的大小\n- 显著性水平 (α)：Type I错误率\n- 检验功效 (1-β)：正确拒绝H₀的概率\n- 样本量 (n)：达到期望功效所需的样本量\n\n支持三种类型的t检验：\n- 单样本t检验\n- 独立样本t检验\n- 配对样本t检验\n\n运行方法：\n```R\nshiny::runApp(\"code/week4/power_analysis_demo.R\")\n```\n\n通过调整这些参数，你可以观察它们如何影响所需的样本量。\n:::\n\n::: {.callout-important}\n#### 假设检验基本原理练习\n\n*   **练习任务**： 提供一个假设检验的应用场景 (例如，检验某电影类型的平均评分是否高于某个值)。\n    1.  **引导学生完成假设检验的五个步骤**： 设定原假设和备择假设，选择合适的检验统计量 (本周先概念性选择，下节课具体介绍)，确定显著性水平，理解 p 值和决策规则。\n    2.  **重点理解原假设、备择假设、显著性水平、p 值、效应量和检验功效的含义**。\n    3.  **鼓励学生使用 AI 工具 (如 Cursor, 搜索引擎) 辅助理解假设检验的概念和步骤**。 例如，让 AI 解释原假设和备择假设的区别，或者显著性水平的意义，以及效应量和检验功效的概念。\n:::\n\n\n### 第八次课 (90分钟)\n\n**上半场 (单样本t检验、双样本t检验，约45分钟):**\n\n*   **常用假设检验方法：t检验 (30分钟):**  {#week-4-t-test}\n    *   **t检验的应用场景**：  检验总体均值是否等于某个值，或检验两个总体的均值是否相等。\n    *   **单样本t检验 (One-Sample t-test)**：\n        *   **适用条件**：  检验一个正态分布总体的均值是否等于某个已知值。\n        *   **原假设 $H_0：\\mu = \\mu_0$，备择假设 $H_1：\\mu \\neq \\mu_0$ (双尾检验), $\\mu > \\mu_0$ (右尾检验), $\\mu < \\mu_0$ (左尾检验)。**\n        *   **检验统计量：t统计量公式。**\n        *   **自由度 (degrees of freedom, df) = n - 1。**\n        *   **p值的计算：使用t分布的累积分布函数 (CDF) 或生存函数 (SF)。**\n        *   **R语言实现：**  `t.test()` 函数，讲解 `t.test()` 函数的基本用法和参数 (例如 `mu`, `alternative`, `conf.level`)。\n    *   **双样本t检验 (Two-Sample t-test)**：\n        *   **独立样本t检验 (Independent Samples t-test)**：\n            *   **适用条件**：  检验两个独立的正态分布总体的均值是否相等。\n            *   **原假设 $H_0：\\mu_1 = \\mu_2$，备择假设 $H_1：\\mu_1 \\neq \\mu_2$ (双尾检验), $\\mu_1 > \\mu_2$ (右尾检验), $\\mu_1 < \\mu_2$ (左尾检验)。**\n            *   **检验统计量：独立样本t统计量公式 (等方差和不等方差两种情况)。**\n            *   **自由度 (df) 的计算 (等方差和不等方差两种情况)。**\n            *   **R语言实现：**  `t.test()` 函数，设置 `paired = FALSE`，以及 `var.equal` 参数 (指定是否假设方差相等)。\n        *   **配对样本t检验 (Paired Samples t-test)**：\n            *   **适用条件**：  检验两个配对样本的均值差是否为零 (例如，同一组对象在处理前后的测量值)。\n            *   **原假设 $H_0：\\mu_d = 0$，备择假设 $H_1：\\mu_d \\neq 0$ (双尾检验), $\\mu_d > 0$ (右尾检验), $\\mu_d < 0$ (左尾检验)，其中 $\\mu_d$ 是配对样本差值的总体均值。**\n            *   **检验统计量：配对样本t统计量公式。**\n            *   **自由度 (df) = n - 1，其中 n 是配对样本的数量。**\n            *   **R语言实现：**  `t.test()` 函数，设置 `paired = TRUE`。\n        *   **演示：**  使用 `t.test()` 函数对示例数据进行单样本t检验和双样本t检验 (独立样本和配对样本)。\n*   **t检验练习 (15分钟):**\n    *   **练习任务：**  提供几个t检验的应用场景 (例如，检验某类型电影的平均评分是否为特定值，检验不同类型电影的平均评分是否相等，检验同一组用户对某电影评分前后的变化)。\n    *   **学生分组练习：**  使用 `t.test()` 函数对示例数据进行单样本t检验和双样本t检验。\n    *   **解释t检验的结果 (p值、置信区间、决策结论)**。  **重点关注 p 值、置信区间和效应量，并尝试解释检验功效**。\n    *   **鼓励学生使用 AI 工具 (如 Cursor) 辅助 `t.test()` 函数的使用和结果解释。**  例如，让 AI 解释 `t.test()` 函数的输出结果，或者根据 t 检验的结果给出结论建议。\n\n::: {.callout-tip}\n## 交互式演示：t检验\n\n为了帮助理解t检验的应用，我们提供了一个交互式的Shiny应用程序 [`t_test_demo.R`](code/week4/t_test_demo.R)。这个程序演示了三种常用的t检验方法：\n\n- 单样本t检验：检验一个样本的均值是否等于某个特定值\n- 独立样本t检验：比较两个独立样本的均值是否相等\n- 配对样本t检验：检验配对样本的差异是否显著\n\n功能特点：\n- 支持不同类型的t检验\n- 可视化数据分布\n- 计算并解释效应量\n- 提供详细的检验结果解释\n- 支持不同的备择假设（双尾、右尾、左尾）\n\n运行方法：\n```R\nshiny::runApp(\"code/week4/t_test_demo.R\")\n```\n\n通过这个演示程序，你可以直观地理解不同类型t检验的应用场景和结果解释。\n:::\n\n**下半场 (项目一检查与汇报准备，约45分钟):**\n\n*   **项目一检查与中期汇报准备 (30分钟):**  {#week-4-project1-check-report-prep}\n    *   **各小组展示项目一的最终数据探索和可视化成果 (非正式展示)。**\n    *   **教师检查各小组的项目进展情况，包括：**\n        *   数据获取和质量\n        *   数据清洗和整理\n        *   描述性统计和可视化探索\n        *   初步的发现和洞察\n    *   **教师提供针对性的项目反馈和改进建议。**\n    *   **布置项目一正式汇报的要求和格式 (例如，PPT汇报，汇报时间，评分标准)。**\n    *   **指导学生准备项目汇报内容，重点突出：**\n        *   项目主题和目标\n        *   数据来源和描述\n        *   数据清洗和预处理方法\n        *   数据探索和可视化结果 (重点展示图表，并进行解释)\n        *   初步的发现和洞察 (从数据中得出的结论)\n        *   项目总结和反思\n*   **项目汇报准备指导 (15分钟):**\n    *   **汇报技巧指导：**  如何清晰、简洁、有效地展示项目成果。\n    *   **PPT制作建议：**  图文并茂，重点突出，逻辑清晰。\n    *   **答辩准备建议：**  预想可能被提问的问题，做好充分准备。\n    *   **鼓励小组内部分工合作，共同完成汇报准备。**\n    *   **鼓励学生使用AI工具 (如Cursor, ChatGPT) 辅助PPT制作和汇报稿撰写。**  例如，让AI根据项目报告草稿，生成PPT大纲或汇报稿初稿。\n\n\n::: {.callout-important}\n## 课后作业 (第四周)\n\n1.  **完成项目一的正式分析报告**，并根据教师反馈进行修改和完善。\n2.  **准备项目一的 PPT 汇报**，并进行小组内部预演。\n3.  **复习本周学习的参数估计和假设检验的基本概念和方法，重点理解效应量和检验功效**。\n4.  **思考题**： 在项目一的数据探索过程中，你使用了哪些描述性统计和可视化方法？这些方法帮助你发现了哪些数据规律和洞察？你认为项目一的成果有哪些局限性？下一步可以如何深入分析？ 如果要进行假设检验，你可能会提出哪些假设？如何进行检验？ 尝试思考如何计算效应量和检验功效，并解释其意义。\n\n:::\n\n\n::: {.callout-tip appearance=\"simple\"}\n## AI 辅助学习建议 (第四周)\n\n*   **参数估计和假设检验**：\n    *   让 AI 解释统计学概念 (置信区间、p 值、假设检验步骤、效应量、检验功效等)\n    *   请 AI 生成 R 代码进行参数估计、假设检验和功效分析\n    *   使用 AI 辅助理解 `t.test()` 函数和 `pwr.t.test()` 函数的输出结果\n\n*   **项目汇报准备**：\n    *   让 AI 帮助组织汇报内容，生成 PPT 大纲\n    *   请 AI 润色项目报告和汇报稿\n    *   使用 AI 辅助 PPT 美化和排版\n:::\n\n::: {.callout-important}\n## 参数估计的关键概念\n\n- **点估计**: 用一个样本统计量的值直接作为总体参数的估计值\n- **区间估计**: 给出一个总体参数的可能取值范围，通常以置信区间的形式呈现\n- **置信区间**: 由样本数据计算出的，包含总体参数真值的可能性为 $(1-\\alpha)$ 的区间\n:::\n\n::: {.callout-important}\n## 假设检验的五个步骤\n\n1. 提出原假设 ($H_0$) 和备择假设 ($H_1$)\n2. 选择检验统计量\n3. 确定显著性水平 ($\\alpha$)\n4. 计算检验统计量的 p 值\n5. 做出决策：\n   - 如果 p-value ≤ α，拒绝 $H_0$，接受 $H_1$\n   - 如果 p-value > α，不拒绝 $H_0$\n:::\n\n::: {.callout-important}\n## 两类错误与检验功效\n\n- **第一类错误 (Type I)**: 错误地拒绝真实的 $H_0$，概率为 α\n- **第二类错误 (Type II)**: 错误地接受错误的 $H_0$，概率为 β\n- **检验功效 (Power)**: 正确拒绝 $H_0$ 的概率，等于 1-β\n:::\n\n::: {.callout-important}\n## t检验的三种类型\n\n1. **单样本t检验**\n   - 检验一个正态分布总体的均值是否等于某个已知值\n   - $H_0：\\mu = \\mu_0$ vs $H_1：\\mu \\neq \\mu_0$ (或 > 或 <)\n\n2. **独立样本t检验**\n   - 检验两个独立的正态分布总体的均值是否相等\n   - $H_0：\\mu_1 = \\mu_2$ vs $H_1：\\mu_1 \\neq \\mu_2$ (或 > 或 <)\n\n3. **配对样本t检验**\n   - 检验配对样本的差异是否显著\n   - $H_0：\\mu_d = 0$ vs $H_1：\\mu_d \\neq 0$ (或 > 或 <)\n:::\n\n::: {.callout-note}\n## 置信区间的计算公式\n\n1. **大样本情况 (n ≥ 30) 或已知总体标准差**:\n   $$\n   \\bar{x} \\pm Z_{\\alpha/2} \\frac{\\sigma}{\\sqrt{n}}\n   $$\n\n2. **小样本情况 (n < 30) 且未知总体标准差**:\n   $$\n   \\bar{x} \\pm t_{\\alpha/2, n-1} \\frac{s}{\\sqrt{n}}\n   $$\n:::\n\n::: {.callout-tip}\n## 假设检验的基本思想\n\n- **反证法**: 先提出一个与研究目的相反的假设(原假设)\n- **小概率事件原理**: 如果原假设成立，某事件发生概率很小，但该事件发生了\n- **逻辑**: $H_0$ 成立 → 小概率事件发生 → 拒绝 $H_0$\n:::\n\n::: {.callout-note}\n## 原假设和备择假设的设定原则\n\n1. **互相排斥**: $H_0$ 和 $H_1$ 不能同时成立\n2. **完备性**: 覆盖所有可能的情况\n3. **优先保护原假设**: 没有充分证据时不拒绝 $H_0$\n:::\n\n::: {.callout-warning}\n## 影响检验功效的因素\n\n- **效应量**: 效应量越大，Power越高\n- **样本量**: 样本量越大，Power越高\n- **显著性水平**: α越大，Power越高\n- **总体标准差**: 标准差越小，Power越高\n- **检验类型**: 单尾检验的Power通常高于双尾检验\n:::\n\n::: {.callout-tip}\n## 项目汇报准备要点\n\n1. **内容准备**:\n   - 项目主题和目标\n   - 数据来源和描述\n   - 数据清洗和预处理方法\n   - 数据探索和可视化结果\n   - 初步发现和洞察\n   - 项目总结和反思\n\n2. **汇报技巧**:\n   - 清晰简洁的表达\n   - 图文并茂的PPT\n   - 充分的答辩准备\n   - 团队分工合作\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}