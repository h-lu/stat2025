<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" width="100%" height="380">
  <style>
    .node { fill: #f39c12; stroke: #e08e0b; stroke-width: 2; rx: 15; ry: 15; }
    .node-text { fill: white; font-family: Arial; font-size: 14px; text-anchor: middle; dominant-baseline: middle; }
    .edge { stroke: #e08e0b; stroke-width: 2; marker-end: url(#arrow); }
    .edge-text { fill: #e08e0b; font-family: Arial; font-size: 12px; text-anchor: middle; }
    .main-node { fill: #00a65a; stroke: #008d4c; stroke-width: 2; }
    .title-text { font-family: Arial; font-size: 18px; font-weight: bold; text-anchor: middle; fill: #f39c12; }
    .concept-box { fill: #f5f5f5; stroke: #e08e0b; stroke-width: 1; stroke-dasharray: 5,3; rx: 8; ry: 8; }
    .concept-text { fill: #e08e0b; font-family: Arial; font-size: 12px; text-anchor: middle; }
  </style>
  <!-- 定义箭头 -->
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#e08e0b"/>
    </marker>
  </defs>
  <!-- 标题 -->
  <text class="title-text" x="400" y="30">tidyr包核心函数知识图谱</text>
  
  <!-- 核心节点 - tidyr -->
  <rect class="node main-node" x="350" y="80" width="100" height="50"/>
  <text class="node-text" x="400" y="105">tidyr</text>
  
  <!-- 左侧 - 长宽转换 -->
  <rect class="concept-box" x="80" y="160" width="280" height="200"/>
  <text class="concept-text" x="220" y="175">长宽格式转换</text>
  
  <!-- pivot_longer -->
  <rect class="node" x="120" y="200" width="120" height="50"/>
  <text class="node-text" x="180" y="225">pivot_longer()</text>
  <line class="edge" x1="350" y1="105" x2="240" y2="200"/>
  <text class="edge-text" x="275" y="145">宽转长</text>
  
  <!-- pivot_wider -->
  <rect class="node" x="120" y="280" width="120" height="50"/>
  <text class="node-text" x="180" y="305">pivot_wider()</text>
  <line class="edge" x1="180" y1="250" x2="180" y2="280"/>
  <text class="edge-text" x="200" y="265">长转宽</text>
  
  <!-- 右侧 - 列操作 -->
  <rect class="concept-box" x="440" y="160" width="280" height="200"/>
  <text class="concept-text" x="580" y="175">列操作</text>
  
  <!-- separate -->
  <rect class="node" x="480" y="200" width="120" height="50"/>
  <text class="node-text" x="540" y="225">separate()</text>
  <line class="edge" x1="450" y1="105" x2="540" y2="200"/>
  <text class="edge-text" x="510" y="145">拆分列</text>
  
  <!-- unite -->
  <rect class="node" x="480" y="280" width="120" height="50"/>
  <text class="node-text" x="540" y="305">unite()</text>
  <line class="edge" x1="540" y1="250" x2="540" y2="280"/>
  <text class="edge-text" x="560" y="265">合并列</text>
  
  <!-- 其他函数 -->
  <rect class="node" x="640" y="230" width="100" height="50"/>
  <text class="node-text" x="690" y="255">fill/drop_na</text>
  <line class="edge" x1="450" y1="85" x2="640" y2="230"/>
  <text class="edge-text" x="550" y="160">处理缺失值</text>
</svg> 