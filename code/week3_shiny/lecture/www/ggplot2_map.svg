<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="100%" height="480">
  <style>
    .node { fill: #dd4b39; stroke: #d33724; stroke-width: 2; rx: 15; ry: 15; }
    .node-text { fill: white; font-family: Arial; font-size: 14px; text-anchor: middle; dominant-baseline: middle; }
    .edge { stroke: #d33724; stroke-width: 2; marker-end: url(#arrow); }
    .edge-text { fill: #d33724; font-family: Arial; font-size: 12px; text-anchor: middle; }
    .main-node { fill: #00a65a; stroke: #008d4c; stroke-width: 2; }
    .title-text { font-family: Arial; font-size: 18px; font-weight: bold; text-anchor: middle; fill: #dd4b39; }
    .layer-box { fill: #f5f5f5; stroke: #d33724; stroke-width: 1; rx: 8; ry: 8; }
    .layer-text { fill: #dd4b39; font-family: Arial; font-size: 12px; text-anchor: middle; }
    .chart-type { fill: #f5f5f5; stroke: #d33724; stroke-width: 1; stroke-dasharray: 5,3; rx: 8; ry: 8; }
    .chart-text { fill: #777; font-family: Arial; font-size: 11px; }
  </style>
  <!-- 定义箭头 -->
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#d33724"/>
    </marker>
  </defs>
  <!-- 标题 -->
  <text class="title-text" x="400" y="30">ggplot2包图层语法知识图谱</text>
  
  <!-- 核心节点 - ggplot2 -->
  <rect class="node main-node" x="350" y="70" width="100" height="50"/>
  <text class="node-text" x="400" y="95">ggplot2</text>
  
  <!-- 数据层 -->
  <rect class="layer-box" x="50" y="150" width="700" height="60"/>
  <text class="layer-text" x="100" y="170">数据层</text>
  <rect class="node" x="200" y="155" width="120" height="50"/>
  <text class="node-text" x="260" y="180">ggplot()</text>
  <line class="edge" x1="365" y1="120" x2="300" y2="155"/>
  
  <!-- 映射层 -->
  <rect class="layer-box" x="50" y="220" width="700" height="60"/>
  <text class="layer-text" x="100" y="240">映射层</text>
  <rect class="node" x="200" y="225" width="120" height="50"/>
  <text class="node-text" x="260" y="250">aes()</text>
  <line class="edge" x1="260" y1="205" x2="260" y2="225"/>
  
  <!-- 几何图形层 -->
  <rect class="layer-box" x="50" y="290" width="700" height="100"/>
  <text class="layer-text" x="100" y="310">几何图形层</text>
  
  <!-- 图表类型盒子 -->
  <rect class="chart-type" x="150" y="320" width="500" height="60"/>
  <!-- 图形类型 -->
  <text class="chart-text" x="180" y="340">geom_point()</text>
  <text class="chart-text" x="260" y="340">geom_line()</text>
  <text class="chart-text" x="340" y="340">geom_bar()</text>
  <text class="chart-text" x="420" y="340">geom_boxplot()</text>
  <text class="chart-text" x="510" y="340">geom_histogram()</text>
  <text class="chart-text" x="600" y="340">geom_...()</text>
  <text class="chart-text" x="180" y="360">散点图</text>
  <text class="chart-text" x="260" y="360">线图</text>
  <text class="chart-text" x="340" y="360">条形图</text>
  <text class="chart-text" x="420" y="360">箱线图</text>
  <text class="chart-text" x="510" y="360">直方图</text>
  <text class="chart-text" x="600" y="360">更多图形</text>
  
  <line class="edge" x1="260" y1="275" x2="260" y2="320"/>
  
  <!-- 刻面层 -->
  <rect class="layer-box" x="50" y="400" width="340" height="60"/>
  <text class="layer-text" x="100" y="420">刻面层</text>
  <rect class="node" x="200" y="405" width="120" height="50"/>
  <text class="node-text" x="260" y="430">facet_*()</text>
  <line class="edge" x1="260" y1="390" x2="260" y2="405"/>
</svg> 