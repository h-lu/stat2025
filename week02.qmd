## 第二周：R语言数据导入与常用数据包

### 掌握R语言数据读取利器

上周我们学习了数据获取的基本方法。本周，我们将深入学习**R语言数据导入**，掌握使用 R 读取各种数据格式的技能。我们将重点介绍 `tidyverse` 生态中的 `readr` 包和高性能的 `datatable` 包，并学习 R 中的基本数据类型、常用统计函数以及 `dplyr` 包的基础用法，为后续的数据分析打下更坚实的基础。

**继续使用 VS Code 或 Cursor + AI 插件：**  请继续使用 VS Code 或 Cursor 编辑器，并充分利用 AI 插件的代码辅助、智能提示、聊天问答等功能，提升学习效率。

::: {.callout-note}
## 本周学习目标

*   **R 数据导入进阶:**  掌握 `readr` 和 `datatable` 包导入各种数据格式。
*   **数据包对比:**  了解 `readr` 和 `datatable` 的特点和适用场景。
*   **R 数据类型:**  熟悉 R 中的基本数据类型。
*   **常用统计函数:**  掌握 R 中常用的统计函数。
*   **`dplyr` 基础:**  初步掌握 `dplyr` 包的基本数据操作。
*   **实战演练:**  使用 `flights` 数据集进行数据导入和导出练习。
*   **AI 辅助数据操作:**  继续探索使用 AI 工具辅助 R 数据操作。
:::

---

### 1. R 语言数据导入常用包：`readr` vs `datatable`

*   **`tidyverse`  `readr` 包 (回顾与进阶):**

    *   **快速便捷:**  `readr` 包是 `tidyverse` 核心包之一，专注于快速、方便地读取各种表格数据文件 (CSV, TXT, TSV 等)。
    *   **自动类型推断:**  `readr` 能够自动检测列的数据类型，并进行合理的转换。
    *   **灵活的参数设置:**  `readr` 提供了丰富的参数，可以灵活控制数据导入过程，例如，指定列名、跳过行、限制读取行数、自定义分隔符、处理缺失值、指定列类型、处理编码问题等。
    *   **返回 `tibble` 数据框:**  `readr` 读取的数据默认是 `tibble` 格式，是 `tidyverse` 推荐使用的数据框，打印输出更友好，子集操作更严谨。
    *   **常用函数:**
        *   `read_csv()`: 读取逗号分隔的 CSV 文件。
        *   `read_tsv()`: 读取制表符分隔的 TSV 文件。
        *   `read_delim()`: 读取更广泛的分隔符文件，可以自定义分隔符。
        *   `read_fwf()`: 读取固定宽度的文件。
        *   `read_table()`: 读取空格分隔的表格文件。
    *   **进阶用法:**  上周我们已经学习了 `read_csv()` 和 `read_tsv()` 的基本用法。  本周我们进一步学习 `readr` 的进阶用法，例如：
        *   **`col_names` 参数:**  用于指定列名。  可以传入字符向量作为列名，或者 `col_names = FALSE` 表示数据文件的第一行不是列名。
        *   **`skip` 参数:**  用于跳过文件开头的若干行。  例如，`skip = 1` 跳过第一行。
        *   **`n_max` 参数:**  用于限制最多读取的行数。  例如，`n_max = 100`  只读取前 100 行。
        *   **`col_types` 参数:**  用于手动指定每一列的数据类型。  例如，`col_types = cols(col1 = col_character(), col2 = col_double())`  指定 `col1` 为字符型，`col2` 为数值型。  常用的类型包括 `col_character()`, `col_double()`, `col_integer()`, `col_logical()`, `col_factor()`, `col_date()`, `col_datetime()`, `col_time()`, `col_number()`, `col_currency()`, `col_skip()`, `col_guess()`.
        *   **`locale` 参数:**  用于处理不同地区的文化和语言习惯，例如，日期和时间格式、小数点和千位分隔符、字符编码等。  可以使用 `locale()` 函数创建 locale 对象，并传入 `locale` 参数。  例如，`locale = locale(encoding = "GBK")`  指定使用 GBK 编码。

*   **`datatable` 包 (高性能数据读取):**

    *   **快速高效:**  `datatable` 包是一个高性能的数据处理包，其数据读取速度非常快，尤其是在处理大型数据文件时，速度远超 `readr` 和 R 基础函数。  `datatable` 包使用 C 语言编写，底层优化，效率极高。
    *   **`fread()` 函数:**  `datatable` 包最核心的函数是 `fread()`，用于快速读取各种格式的表格数据文件 (包括 CSV, TXT 等)。  `fread()`  功能强大，参数丰富，可以灵活控制数据导入过程。
    *   **自动类型推断 (更智能):**  `fread()`  的自动类型推断功能比 `readr` 更智能，能够更准确地识别列的数据类型，并进行高效的转换。
    *   **多线程读取:**  `fread()`  支持多线程读取，可以充分利用多核 CPU 的性能，进一步提高读取速度 (默认使用所有可用 CPU 核心)。
    *   **语法简洁:**  `fread()`  的语法简洁易用，很多参数都有默认值，通常只需指定文件路径即可快速读取数据。
    *   **返回 `data.table` 数据框:**  `fread()`  读取的数据是 `data.table` 格式。  `data.table` 是 `datatable` 包定义的一种高性能数据框，在数据处理和分析方面具有很多优势，例如，速度更快、语法更简洁、功能更强大。  `data.table`  的语法和操作方式与 R 基础的 `data.frame`  和 `tidyverse` 的 `tibble`  有所不同，需要学习其特有的语法。  **本课程中，我们主要使用 `tibble` 数据框进行数据分析，`data.table`  作为扩展学习内容，感兴趣的同学可以深入学习。**
    *   **基本用法:**
        ```r
        # 安装和加载 datatable 包 (如果已安装，则只需加载)
        # install.packages("data.table")
        library(data.table)

        # 使用 fread() 读取 CSV 文件
        data_dt <- fread("your_data.csv")

        # 打印数据框
        print(data_dt)
        ```
    *   **常用参数:**  `fread()`  函数有很多参数，常用的参数包括：
        *   `file`:  文件路径。
        *   `sep`:  分隔符。  默认自动检测，通常无需手动指定。
        *   `header`:  逻辑值，是否将第一行作为列名。  默认为 `TRUE`。
        *   `col.names`:  用于指定列名。
        *   `skip`:  用于跳过文件开头的若干行。
        *   `nrows`:  用于限制最多读取的行数。
        *   `colClasses`:  用于手动指定每一列的数据类型。  例如，`colClasses = c("character", "numeric")`  指定第一列为字符型，第二列为数值型。
        *   `encoding`:  字符编码。  例如，`encoding = "GBK"`  指定使用 GBK 编码。

*   **`readr` vs `datatable` 总结:**

    | 特性         | `readr` (`tidyverse`) | `datatable` (`fread()`) |
    |--------------|-----------------------|--------------------------|
    | **速度**     | 较快                  | **非常快**               |
    | **易用性**   | 非常易用              | 易用                     |
    | **功能**     | 功能丰富              | 功能强大                 |
    | **类型推断** | 自动                  | **更智能自动**           |
    | **数据框**   | `tibble`              | `data.table`             |
    | **依赖**     | `tidyverse`           | `datatable`              |
    | **适用场景** | 常用数据导入          | **大型数据文件导入**     |

    *   **选择建议:**
        *   **对于一般的数据导入任务，`readr` 包已经足够快速和方便，是首选。**  `readr`  易用性好，与 `tidyverse` 生态系统兼容性好，是数据分析的常用工具。
        *   **当需要处理非常大的数据文件，或者对数据读取速度有极高要求时，可以考虑使用 `datatable` 包的 `fread()` 函数。**  `fread()`  速度极快，性能卓越，是处理大数据的不二之选。  但需要注意 `fread()`  返回的是 `data.table` 数据框，其语法和操作方式与 `tibble`  有所不同。

### 2. 使用 `flights` 数据集演示数据导入导出

*   **`flights` 数据集介绍:**  `nycflights13` 包中包含了 2013 年纽约出发的所有航班数据，是一个非常经典的数据分析和演示数据集。  `tidyverse`  的很多教程和示例都使用 `flights` 数据集。

    *   **加载 `nycflights13` 包:**
        ```r
        # 安装和加载 nycflights13 包 (如果已安装，则只需加载)
        # install.packages("nycflights13")
        library(nycflights13)

        # 查看 flights 数据集
        head(flights)
        ```
    *   **`flights` 数据框:**  `flights`  是一个 `tibble` 数据框，包含了航班的各种信息，例如，出发时间、到达时间、航空公司、航班号、出发机场、到达机场、飞行距离、飞行时长等。  可以使用 `?flights`  查看数据集的详细信息。

*   **保存 `flights` 数据为 CSV 文件:**

    *   **使用 `readr`  `write_csv()` 函数:**  `readr` 包提供了 `write_csv()` 函数，用于将数据框保存为 CSV 文件。
        ```r
        # 使用 write_csv() 保存 flights 数据为 CSV 文件
        write_csv(flights, "flights.csv")

        # 提示：CSV 文件已保存到当前工作目录下
        ```
        *   **`write_csv()`  函数:**  第一个参数是要保存的数据框，第二个参数是 CSV 文件名 (带引号)。  默认使用逗号作为分隔符，UTF-8 编码，第一行写入列名。
        *   **当前工作目录:**  CSV 文件默认保存到 R 的当前工作目录下。  可以使用 `getwd()`  函数查看当前工作目录，使用 `setwd("your_path")`  设置工作目录。  建议将数据文件保存在项目文件夹下的 `data`  子文件夹中，方便管理。

*   **使用 `readr`  `read_csv()` 函数读取 CSV 文件:**

    *   **从 CSV 文件读取数据:**  使用 `read_csv()`  函数读取刚刚保存的 `flights.csv` 文件。
        ```r
        # 使用 read_csv() 读取 CSV 文件
        flights_readr <- read_csv("flights.csv")

        # 打印读取的数据
        print(flights_readr)

        # 检查数据是否与原始 flights 数据集一致
        identical(flights, flights_readr)
        ```
        *   **`identical()` 函数:**  用于比较两个 R 对象是否完全相同 (包括数据和属性)。  如果返回 `TRUE`，则表示两个对象完全一致。

*   **使用 `datatable`  `fwrite()` 和 `fread()` 函数进行数据导入导出:**

    *   **`fwrite()` 函数:**  `datatable` 包提供了 `fwrite()` 函数，用于快速将 `data.table` 或 `data.frame` 保存为文件 (包括 CSV, TXT 等)。  `fwrite()`  速度非常快，性能优异。
        ```r
        # 将 flights 数据转换为 data.table 格式
        flights_dt <- as.data.table(flights)

        # 使用 fwrite() 保存 data.table 为 CSV 文件
        fwrite(flights_dt, "flights_dt.csv")

        # 提示：CSV 文件已保存到当前工作目录下
        ```
        *   **`as.data.table()` 函数:**  用于将其他格式的数据框 (例如 `tibble`, `data.frame`) 转换为 `data.table` 格式。  如果数据已经是 `data.table` 格式，则无需转换。
        *   **`fwrite()` 函数:**  第一个参数是要保存的 `data.table`，第二个参数是文件名。  默认使用逗号分隔符，UTF-8 编码，第一行写入列名。

    *   **`fread()` 函数:**  使用 `fread()` 函数读取 `fwrite()`  保存的 `flights_dt.csv` 文件。
        ```r
        # 使用 fread() 读取 CSV 文件
        flights_fread <- fread("flights_dt.csv")

        # 打印读取的数据
        print(flights_fread)

        # 检查数据是否与原始 flights_dt 数据集一致
        identical(flights_dt, flights_fread)
        ```

*   **数据导入导出练习:**  鼓励学生尝试使用 `readr` 和 `datatable` 包的不同函数和参数，进行数据导入导出练习，例如：
    *   使用 `write_tsv()` 和 `read_tsv()`  保存和读取 TSV 文件。
    *   使用 `write.table()` 和 `read.table()` (R 基础函数)  进行数据导入导出，并比较速度和用法。
    *   尝试使用 `col_names`, `skip`, `n_max`, `col_types`, `encoding` 等参数，控制数据导入过程。

### 3. R 语言基本数据类型

*   **R 的数据类型:**  R 语言是一种动态类型语言，变量的类型不需要显式声明，R 会自动根据赋值内容判断变量类型。  R 中常用的基本数据类型包括：

    *   **数值型 (numeric):**  用于表示数值数据，包括整数和小数。  例如，`10`, `3.14`, `-5.2`。  数值型是 R 中最常用的数据类型。
    *   **字符型 (character):**  用于表示文本数据，用引号 (单引号或双引号) 包围。  例如， `"hello"`,  `'world'`,  `"统计学"`,  `'R 语言'`。
    *   **逻辑型 (logical):**  用于表示逻辑值，只有两个取值：`TRUE` (真) 和 `FALSE` (假)。  逻辑值常用于条件判断和逻辑运算。  例如， `TRUE`,  `FALSE`,  `10 > 5` (结果为 `TRUE`),  `"a" == "b"` (结果为 `FALSE`)。
    *   **因子型 (factor):**  用于表示分类数据或名义变量。  因子型变量的值是有限的、预定义的类别 (levels)。  因子型变量在统计分析中非常重要，例如，用于表示性别、学历、地区、产品类别等。  使用 `factor()` 函数创建因子型变量。
    *   **日期型 (date):**  用于表示日期数据，例如，`2023-10-26`。  R 提供了 `Date` 类型来处理日期数据。  可以使用 `as.Date()` 函数将字符型数据转换为日期型数据。
    *   **日期时间型 (POSIXct/POSIXlt):**  用于表示日期和时间数据，例如，`2023-10-26 10:30:00`。  R 提供了 `POSIXct` 和 `POSIXlt` 两种类型来处理日期时间数据。  可以使用 `as.POSIXct()` 或 `as.POSIXlt()` 函数将字符型数据转换为日期时间型数据。

*   **数据类型判断和转换:**

    *   **类型判断函数:**  R 提供了多种函数用于判断变量的数据类型，例如：
        *   `is.numeric()`:  判断是否为数值型。
        *   `is.character()`:  判断是否为字符型。
        *   `is.logical()`:  判断是否为逻辑型。
        *   `is.factor()`:  判断是否为因子型。
        *   `is.Date()`:  判断是否为日期型。
        *   `is.POSIXct()` / `is.POSIXlt()`:  判断是否为日期时间型。
        *   `class()`:  返回变量的类型名称 (更通用)。
        *   `typeof()`:  返回变量的底层存储类型 (更底层)。

    *   **类型转换函数:**  R 提供了多种函数用于将变量从一种类型转换为另一种类型，例如：
        *   `as.numeric()`:  转换为数值型。
        *   `as.character()`:  转换为字符型。
        *   `as.logical()`:  转换为逻辑型。
        *   `as.factor()`:  转换为因子型。
        *   `as.Date()`:  转换为日期型。
        *   `as.POSIXct()` / `as.POSIXlt()`:  转换为日期时间型。

    *   **类型转换注意事项:**  类型转换并非总是成功，需要注意数据本身的特点和转换规则。  例如，将字符型转换为数值型时，如果字符型数据不是有效的数值格式，则会转换为 `NA` (缺失值)。  将数值型转换为逻辑型时，非零数值会转换为 `TRUE`，零值会转换为 `FALSE`。

*   **数据类型练习:**  鼓励学生创建不同类型的变量，并使用类型判断和转换函数进行练习，例如：
    ```r
    # 数值型
    x <- 10
    is.numeric(x)  # TRUE
    as.character(x) # "10"

    # 字符型
    y <- "hello"
    is.character(y) # TRUE
    as.numeric(y)  # NA (无法转换为数值)

    # 逻辑型
    z <- TRUE
    is.logical(z)  # TRUE
    as.numeric(z)  # 1 (TRUE 转换为 1)
    as.numeric(FALSE) # 0 (FALSE 转换为 0)

    # 因子型
    gender <- factor(c("Male", "Female", "Male", "Male", "Female"))
    is.factor(gender) # TRUE
    levels(gender)   # 查看因子水平

    # 日期型
    date_str <- "2023-10-26"
    date_obj <- as.Date(date_str)
    is.Date(date_obj) # TRUE
    ```

### 4. R 语言常用统计函数

*   **描述性统计函数:**  R 提供了丰富的函数用于计算描述性统计量，常用的函数包括：

    *   **中心趋势度量:**
        *   `mean()`:  均值 (平均值)。
        *   `median()`:  中位数 (将数据排序后位于中间位置的值)。
        *   `modeest::mlv()`:  众数 (数据中出现频率最高的值)。  需要安装 `modeest` 包。
    *   **离散程度度量:**
        *   `sd()`:  标准差 (度量数据的离散程度)。
        *   `var()`:  方差 (标准差的平方)。
        *   `IQR()`:  四分位距 (第三四分位数减去第一四分位数)。
        *   `range()`:  极差 (最大值减去最小值)。
    *   **位置度量:**
        *   `quantile()`:  分位数 (计算指定的分位数，例如，四分位数、十分位数、百分位数)。
        *   `min()`:  最小值。
        *   `max()`:  最大值。
    *   **求和与计数:**
        *   `sum()`:  求和。
        *   `length()`:  长度 (向量或列表的元素个数)。
        *   `count()` (dplyr):  计数 (统计数据框中不同值的频数)。  `dplyr` 包的函数。

*   **其他常用统计函数:**

    *   **`cor()`:  相关系数** (度量两个数值型变量之间的线性相关程度)。
    *   **`cov()`:  协方差** (度量两个数值型变量的协同变化程度)。
    *   **`table()`:  频数统计表** (统计分类变量的频数分布)。
    *   **`prop.table()`:  比例表** (将频数统计表转换为比例)。
    *   **`summary()`:  摘要统计** (提供数据的基本摘要统计信息，包括均值、中位数、最小值、最大值、四分位数等)。  `summary()`  函数可以应用于不同类型的数据，提供不同的摘要信息。

*   **统计函数的使用注意事项:**

    *   **缺失值处理:**  R 的统计函数通常可以处理缺失值 (`NA`)。  大多数统计函数都有 `na.rm` 参数，用于控制是否移除缺失值。  `na.rm = TRUE`  表示在计算时移除缺失值，`na.rm = FALSE` (默认值) 表示如果数据中存在缺失值，则结果为 `NA`。  需要根据具体情况选择是否移除缺失值。
    *   **数据类型:**  统计函数通常只适用于数值型数据。  对于字符型、因子型等非数值型数据，需要进行适当的转换或使用其他类型的统计方法。
    *   **函数文档:**  R 的统计函数都有详细的帮助文档。  可以使用 `?函数名`  或 `help("函数名")`  查看函数文档，了解函数的用法、参数和返回值。

*   **统计函数练习:**  使用 `flights` 数据集，练习使用常用统计函数，例如：
    ```r
    # 计算 flights 数据集中 arr_delay (到达延误时间) 的均值、中位数、标准差
    mean(flights$arr_delay, na.rm = TRUE)
    median(flights$arr_delay, na.rm = TRUE)
    sd(flights$arr_delay, na.rm = TRUE)

    # 计算 carrier (航空公司) 的频数统计表
    table(flights$carrier)

    # 计算 origin (出发机场) 和 dest (到达机场) 的交叉频数表
    table(flights$origin, flights$dest)

    # 使用 summary() 函数查看 flights 数据集的摘要统计信息
    summary(flights)
    ```

### 5. `dplyr` 包基础：数据框操作利器

*   **`dplyr` 包简介:**  `dplyr` 包是 `tidyverse` 生态系统中的核心数据处理包，提供了一套简洁、高效、易用的数据框操作 "动词" (verbs)。  `dplyr`  的设计理念是 "数据操作管道" (data manipulation pipeline)，可以将多个数据操作步骤连接起来，形成清晰、可读性强的数据处理流程。  `dplyr`  是 R 语言数据分析中最常用的包之一。

*   **`dplyr`  核心 "动词" (verbs):**  `dplyr`  包提供了以下几个核心 "动词"，用于完成常见的数据框操作：

    *   **`filter()`:  筛选行** (根据条件筛选数据框的行)。  类似于 SQL 中的 `WHERE` 语句。
    *   **`select()`:  选择列** (选择数据框的列)。  类似于 SQL 中的 `SELECT` 语句。
    *   **`mutate()`:  创建新列或修改现有列** (基于现有列计算生成新列，或修改现有列的值)。
    *   **`arrange()`:  排序** (根据指定的列对数据框进行排序)。  类似于 SQL 中的 `ORDER BY` 语句。
    *   **`summarize()`:  汇总统计** (对数据框进行分组汇总统计，计算各种统计量)。  类似于 SQL 中的聚合函数 (例如 `SUM()`, `AVG()`, `COUNT()`) 和 `GROUP BY` 语句。
    *   **`group_by()`:  分组** (将数据框按照指定的列进行分组，为后续的汇总统计操作做准备)。  类似于 SQL 中的 `GROUP BY` 语句。

*   **管道操作符 `%>%`:**  `dplyr`  包与管道操作符 `%>%`  (pipe operator) 完美结合，可以实现链式数据操作。  管道操作符 `%>%`  将上一步操作的结果作为下一步操作的第一个参数传入，使得代码更加简洁、易读。  管道操作符来自 `magrittr` 包，`tidyverse`  自动加载 `magrittr` 包。

*   **`dplyr`  基础用法示例 (使用 `flights` 数据集):**

    *   **筛选行 (`filter()`):**  筛选出所有 1 月份 (month == 1) 的航班。
        ```r
        library(dplyr)

        january_flights <- flights %>%
          filter(month == 1)

        print(january_flights)
        ```
        *   **`%>%` 管道操作符:**  `flights %>% filter(month == 1)`  表示将 `flights` 数据框作为 `filter()` 函数的第一个参数传入。
        *   **`filter(month == 1)`:**  筛选条件是 `month == 1`，表示 `month` 列的值等于 1。  `==`  是等于比较运算符。

    *   **选择列 (`select()`):**  选择 `year`, `month`, `day`, `carrier`, `flight`, `dep_delay`, `arr_delay`  这几列。
        ```r
        selected_cols_flights <- flights %>%
          select(year, month, day, carrier, flight, dep_delay, arr_delay)

        print(selected_cols_flights)
        ```
        *   **`select(year, month, day, carrier, flight, dep_delay, arr_delay)`:**  直接列出要选择的列名即可。

    *   **创建新列 (`mutate()`):**  创建一个新列 `gain`，表示航班的实际飞行时间 (到达时间 - 出发时间 - 计划飞行时间)。
        ```r
        flights_with_gain <- flights %>%
          mutate(gain = arr_time - dep_time - air_time)

        print(flights_with_gain)
        ```
        *   **`mutate(gain = arr_time - dep_time - air_time)`:**  `gain = ...`  表示创建名为 `gain` 的新列，等号右边是计算新列值的表达式。

    *   **排序 (`arrange()`):**  按照出发延误时间 `dep_delay`  进行升序排序。
        ```r
        arranged_flights <- flights %>%
          arrange(dep_delay)

        print(arranged_flights)
        ```
        *   **`arrange(dep_delay)`:**  按照 `dep_delay` 列进行升序排序。  默认升序。  降序排序可以使用 `desc(dep_delay)`。

    *   **汇总统计 (`summarize()`):**  计算所有航班的平均到达延误时间 `arr_delay`。
        ```r
        average_delay <- flights %>%
          summarize(mean_delay = mean(arr_delay, na.rm = TRUE))

        print(average_delay)
        ```
        *   **`summarize(mean_delay = mean(arr_delay, na.rm = TRUE))`:**  `mean_delay = ...`  表示创建一个名为 `mean_delay` 的汇总统计量，等号右边是计算汇总统计量的表达式，这里使用 `mean()` 函数计算平均值，`na.rm = TRUE`  表示移除缺失值。

    *   **分组汇总 (`group_by()` + `summarize()`):**  按照航空公司 `carrier`  分组，计算每个航空公司的平均到达延误时间。
        ```r
        carrier_delay <- flights %>%
          group_by(carrier) %>%
          summarize(mean_delay = mean(arr_delay, na.rm = TRUE))

        print(carrier_delay)
        ```
        *   **`group_by(carrier)`:**  按照 `carrier` 列进行分组。  后续的 `summarize()`  操作将在每个分组内进行。
        *   **`summarize(mean_delay = mean(arr_delay, na.rm = TRUE))`:**  在每个航空公司分组内计算平均到达延误时间。

*   **`dplyr`  练习:**  鼓励学生使用 `dplyr`  的各种 "动词" 和管道操作符，对 `flights`  数据集进行各种数据操作练习，例如：
    *   筛选出到达延误时间超过 60 分钟的航班。
    *   选择 `carrier`, `flight`, `dep_delay`, `arr_delay`  和 `distance`  列，并按照飞行距离 `distance`  进行降序排序。
    *   创建新列 `speed`，表示航班的平均飞行速度 (距离 / 飞行时间)。
    *   按照出发机场 `origin`  分组，计算每个出发机场的航班数量和平均出发延误时间。
    *   尝试组合多个 `dplyr`  动词，完成更复杂的数据操作任务。

*   **AI 辅助 `dplyr`  使用 (可选):**  演示如何使用 AI 插件辅助 `dplyr`  包的使用。  例如：

    *   **函数用法查询:**  使用 AI 聊天提问： "`filter()` function in R `dplyr` package",  "how to use `group_by()` and `summarize()` in `dplyr`"。  AI 可能会提供函数文档或使用示例。
    *   **代码补全:**  在 VS Code/Cursor 中输入 `flights %>% fil`，AI 插件会自动提示 `filter()` 函数，并提供函数参数提示。
    *   **代码示例生成:**  使用 AI 代码生成功能，输入注释:  `# R code to filter flights data for month == 2 and carrier == "AA" using dplyr`,  让 AI 生成代码。
    *   **代码解释:**  使用 AI 代码解释功能，选中 `dplyr` 代码片段，让 AI 解释代码的功能和每一行代码的作用。

### 6. 本周内容总结与下周预告

*   **本周回顾:**  回顾本周学习内容，巩固重点知识。  本周我们**深入学习**了 R 语言数据导入的常用包 `readr` 和 `datatable`，对比了它们的特点和适用场景，学习了 R 的基本数据类型和常用统计函数，并初步掌握了 `dplyr` 包的基本用法。  **数据导入、数据类型、统计函数和 `dplyr`  是 R 语言数据分析的基础，务必熟练掌握本周所学内容。**

*   **下周预告:**  下周我们将继续深入学习 `dplyr` 包，学习更高级的数据操作技巧，例如，多表连接 (join)、数据变形 (reshape)、窗口函数 (window function) 等。  `dplyr`  是数据清洗和预处理的利器，下周我们将重点学习如何使用 `dplyr`  进行高效的数据清洗和预处理。

### 7. 课后任务

*   **小组任务:**
    *   **继续项目一数据探索:**  各小组继续使用 R 语言导入和探索项目一的数据集，尝试使用 `readr` 或 `datatable` 包导入数据，并使用本周学习的 R 基础知识和 `dplyr`  包进行初步的数据查看和理解。
    *   **小组讨论数据清洗方案:**  小组讨论项目一的数据清洗和预处理方案，为下周的数据清洗任务做好准备。

*   **个人任务:**
    *   **复习本周内容:**  回顾本周讲义和课堂笔记，巩固 `readr` 和 `datatable` 包的用法、R 基本数据类型、常用统计函数和 `dplyr`  基础用法。
    *   **R 代码练习:**  完成本讲义中布置的 R 代码练习，熟练掌握 `readr`, `datatable`, R 基础函数和 `dplyr`  包的常用函数。  尝试使用 AI 插件辅助 R 代码练习。
    *   **`flights` 数据集练习:**  使用 `flights`  数据集，练习使用 `readr` 和 `datatable`  进行数据导入导出，练习使用 R 基本数据类型和统计函数，练习使用 `dplyr`  包进行数据操作。  可以尝试完成讲义中提供的练习题，也可以自己设计练习题。

::: {.callout-tip}
## AI 辅助学习小贴士

*   **R 代码练习:**  继续在 VS Code 或 Cursor 中练习 R 语言代码，充分利用 AI 插件的代码自动补全、代码生成、代码解释、AI 聊天等功能。  遇到 R 代码问题，及时向 AI 提问。
*   **数据包使用问题:**  如果在使用 `readr`, `datatable`, `dplyr`  等数据包时遇到问题，可以查阅包的官方文档，或者使用 AI 聊天提问，寻求帮助。
*   **统计概念理解:**  如果对某些统计概念 (例如，均值、中位数、标准差、相关系数等) 理解不透彻，可以使用 AI 聊天提问，让 AI 提供更详细的解释和例子。
*   **代码效率优化:**  如果希望提高 R 代码的运行效率，可以尝试使用 `datatable` 包，或者使用 AI 聊天咨询代码优化技巧。
:::

::: {.callout-note}
## 学习寄语

**工欲善其事，必先利其器！  本周我们学习了 R 语言数据导入和数据处理的利器，为后续的数据分析打下了坚实的基础。  熟练掌握这些工具，您将能够更高效地进行数据分析！**  继续保持学习的热情，充分利用 VS Code/Cursor 和 AI 插件的强大功能，相信大家会在统计学和 R 语言的学习中取得更大的进步！  下周见！
::: 