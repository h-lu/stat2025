<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>第三周：描述性统计：数据探索与可视化 – 统计学与R语言</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week4.html" rel="next">
<link href="./week2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles/custom.css">
<link rel="stylesheet" href="styles/mermaid.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week1.html">项目一：统计分析基础与数据可视化</a></li><li class="breadcrumb-item"><a href="./week3.html"><span class="chapter-title">第三周：描述性统计：数据探索与可视化</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">统计学与R语言</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/h-lu/stat2025" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">欢迎</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllbus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">课程概述</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">项目一：统计分析基础与数据可视化</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第一周：统计学导论</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第二周：R语言数据导入与数据初步理解</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">第三周：描述性统计：数据探索与可视化</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第四周：推断性统计初步：参数估计与假设检验</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">项目二：商业数据分析与统计推断</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week5.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第五周：方差分析</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第六周：回归分析初步</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第七周：分类数据分析</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第八周：项目二总结与汇报</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#第五次课数据清洗进阶可视化初步" id="toc-第五次课数据清洗进阶可视化初步" class="nav-link active" data-scroll-target="#第五次课数据清洗进阶可视化初步">第五次课：数据清洗进阶、可视化初步</a>
  <ul class="collapse">
  <li><a href="#tidyr-包数据整理" id="toc-tidyr-包数据整理" class="nav-link" data-scroll-target="#tidyr-包数据整理"><code>tidyr</code> 包：数据整理</a></li>
  <li><a href="#ggplot2-包数据可视化初步" id="toc-ggplot2-包数据可视化初步" class="nav-link" data-scroll-target="#ggplot2-包数据可视化初步"><code>ggplot2</code> 包：数据可视化初步</a></li>
  </ul></li>
  <li><a href="#第六次课可视化进阶数据探索与可视化综合应用" id="toc-第六次课可视化进阶数据探索与可视化综合应用" class="nav-link" data-scroll-target="#第六次课可视化进阶数据探索与可视化综合应用">第六次课：可视化进阶、数据探索与可视化综合应用</a>
  <ul class="collapse">
  <li><a href="#ggplot2-包数据可视化进阶" id="toc-ggplot2-包数据可视化进阶" class="nav-link" data-scroll-target="#ggplot2-包数据可视化进阶"><code>ggplot2</code> 包：数据可视化进阶</a></li>
  <li><a href="#tidyverse-生态数据处理和可视化的综合应用" id="toc-tidyverse-生态数据处理和可视化的综合应用" class="nav-link" data-scroll-target="#tidyverse-生态数据处理和可视化的综合应用">tidyverse 生态：数据处理和可视化的综合应用</a></li>
  <li><a href="#数据探索与可视化练习" id="toc-数据探索与可视化练习" class="nav-link" data-scroll-target="#数据探索与可视化练习">数据探索与可视化练习</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week1.html">项目一：统计分析基础与数据可视化</a></li><li class="breadcrumb-item"><a href="./week3.html"><span class="chapter-title">第三周：描述性统计：数据探索与可视化</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">第三周：描述性统计：数据探索与可视化</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
本周学习目标
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>学习使用 <code>dplyr</code> 和 <code>tidyr</code> 包进行<strong>更高级的数据清洗和整理</strong></li>
<li>掌握 <code>ggplot2</code> 包<strong>基本语法</strong>，绘制常用<strong>数据可视化图表</strong> (直方图、散点图、箱线图)</li>
<li>学习<strong>美化</strong> <code>ggplot2</code> 图形，添加<strong>标题、标签、修改颜色</strong>等</li>
<li>了解<strong>数据可视化</strong>在数据探索中的作用，<strong>通过可视化发现数据规律</strong></li>
<li>综合运用 <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code> 进行<strong>完整的数据探索和可视化分析</strong></li>
</ul>
</div>
</div>
<section id="第五次课数据清洗进阶可视化初步" class="level2">
<h2 class="anchored" data-anchor-id="第五次课数据清洗进阶可视化初步">第五次课：数据清洗进阶、可视化初步</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>dplyr</code> 包：数据清洗和预处理进阶
</div>
</div>
<div class="callout-body-container callout-body">
<p>在第二周，我们学习了 <code>dplyr</code> 包的 <code>select()</code> 和 <code>filter()</code> 函数，用于列选择和行筛选。<code>dplyr</code> 包还提供了很多其他强大的函数，可以帮助我们更高效地进行数据清洗和预处理。</p>
</div>
</div>
<section id="mutate-函数-创建新列或修改现有列" class="level4">
<h4 class="anchored" data-anchor-id="mutate-函数-创建新列或修改现有列"><code>mutate()</code> 函数： 创建新列或修改现有列</h4>
<p><code>mutate()</code> 函数可以基于现有列进行计算，创建新的列，或者修改已有的列。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 首先加载必要的包</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建新列：计算每只企鹅的体重与体长的比值</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_length_ratio =</span> body_mass_g <span class="sc">/</span> bill_length_mm)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改现有列：将体重从克转换为千克</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g <span class="sc">/</span> <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>创建新列</strong>: <code>mutate()</code> 最常用的功能是创建新列，可以基于现有列进行各种计算，例如加减乘除、取对数、标准化等。</li>
<li><strong>修改现有列</strong>: <code>mutate()</code> 也可以用于修改现有列的值，例如将单位转换、数据类型转换等。</li>
<li><strong>创建多个列</strong>: <code>mutate()</code> 可以同时创建多个新列，只需在函数中指定多个赋值语句即可。</li>
<li><strong>条件创建列</strong>: 结合 <code>if_else()</code> 或 <code>case_when()</code> 函数，可以根据条件判断创建不同的列值。</li>
<li><strong>链式操作</strong>: <code>mutate()</code> 可以和 <code>dplyr</code> 包的其他函数 (如 <code>select()</code>, <code>filter()</code>, <code>group_by()</code>, <code>summarise()</code>) 灵活组合使用，实现复杂的数据处理流程。</li>
<li><strong>保持数据框结构</strong>: <code>mutate()</code> 不会改变数据框的行数，只会增加或修改列。</li>
</ul>
</div>
</div>
</section>
<section id="arrange-函数-排序数据" class="level4">
<h4 class="anchored" data-anchor-id="arrange-函数-排序数据"><code>arrange()</code> 函数： 排序数据</h4>
<p><code>arrange()</code> 函数可以按照指定的列对数据进行排序，可以升序，也可以降序。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 按企鹅体重降序排序</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Gentoo  Biscoe           49.2          15.2               221        6300
 2 Gentoo  Biscoe           59.6          17                 230        6050
 3 Gentoo  Biscoe           51.1          16.3               220        6000
 4 Gentoo  Biscoe           48.8          16.2               222        6000
 5 Gentoo  Biscoe           45.2          16.4               223        5950
 6 Gentoo  Biscoe           49.8          15.9               229        5950
 7 Gentoo  Biscoe           48.4          14.6               213        5850
 8 Gentoo  Biscoe           49.3          15.7               217        5850
 9 Gentoo  Biscoe           55.1          16                 230        5850
10 Gentoo  Biscoe           49.5          16.2               229        5800
# ℹ 334 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;,
#   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 按企鹅种类升序、体重降序排序</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(species, <span class="fu">desc</span>(body_mass_g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Biscoe              43.2          19                 197        4775
 2 Adelie  Biscoe              41            20                 203        4725
 3 Adelie  Torgersen           42.9          17.6               196        4700
 4 Adelie  Torgersen           39.2          19.6               195        4675
 5 Adelie  Dream               39.8          19.1               184        4650
 6 Adelie  Dream               39.6          18.8               190        4600
 7 Adelie  Biscoe              45.6          20.3               191        4600
 8 Adelie  Torgersen           42.5          20.7               197        4500
 9 Adelie  Dream               37.5          18.5               199        4475
10 Adelie  Torgersen           41.8          19.4               198        4450
# ℹ 334 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;,
#   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>单列排序和多列排序</strong>: <code>arrange()</code> 可以指定一个或多个列进行排序，实现单条件排序和多条件排序。多列排序时，先按第一列排序，再在第一列相同的情况下按第二列排序，以此类推。</li>
<li><strong>升序和降序</strong>: 默认升序排序，使用 <code>desc()</code> 函数可以实现降序排序。</li>
<li><strong>缺失值处理</strong>: <code>arrange()</code> 默认将缺失值 (NA) 排在最后。</li>
<li><strong>保持数据框结构</strong>: <code>arrange()</code> 不会改变数据框的列数和行数，只是改变行的顺序。</li>
<li><strong>数据探索和报告中使用</strong>: <code>arrange()</code> 常用于数据探索阶段，例如找出评分最高的电影、票房最高的电影等。在生成报告时，排序后的数据表格更易于阅读和理解。</li>
<li><strong>为后续操作准备数据</strong>: 排序后的数据可以为后续的数据分析和可视化提供便利，例如绘制折线图、计算累计值等。</li>
</ul>
</div>
</div>
</section>
<section id="rename-函数-重命名列名" class="level4">
<h4 class="anchored" data-anchor-id="rename-函数-重命名列名"><code>rename()</code> 函数： 重命名列名</h4>
<p><code>rename()</code> 函数可以修改数据框的列名，使其更易于理解和使用。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 将列名 bill_length_mm 重命名为 beak_length</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">beak_length =</span> bill_length_mm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
   species island  beak_length bill_depth_mm flipper_length_mm body_mass_g sex  
   &lt;fct&gt;   &lt;fct&gt;         &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
 1 Adelie  Torger…        39.1          18.7               181        3750 male 
 2 Adelie  Torger…        39.5          17.4               186        3800 fema…
 3 Adelie  Torger…        40.3          18                 195        3250 fema…
 4 Adelie  Torger…        NA            NA                  NA          NA &lt;NA&gt; 
 5 Adelie  Torger…        36.7          19.3               193        3450 fema…
 6 Adelie  Torger…        39.3          20.6               190        3650 male 
 7 Adelie  Torger…        38.9          17.8               181        3625 fema…
 8 Adelie  Torger…        39.2          19.6               195        4675 male 
 9 Adelie  Torger…        34.1          18.1               193        3475 &lt;NA&gt; 
10 Adelie  Torger…        42            20.2               190        4250 &lt;NA&gt; 
# ℹ 334 more rows
# ℹ 3 more variables: year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;, body_mass_kg &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 同时重命名多列</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">beak_length =</span> bill_length_mm, <span class="at">beak_depth =</span> bill_depth_mm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
   species island    beak_length beak_depth flipper_length_mm body_mass_g sex   
   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;      &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; 
 1 Adelie  Torgersen        39.1       18.7               181        3750 male  
 2 Adelie  Torgersen        39.5       17.4               186        3800 female
 3 Adelie  Torgersen        40.3       18                 195        3250 female
 4 Adelie  Torgersen        NA         NA                  NA          NA &lt;NA&gt;  
 5 Adelie  Torgersen        36.7       19.3               193        3450 female
 6 Adelie  Torgersen        39.3       20.6               190        3650 male  
 7 Adelie  Torgersen        38.9       17.8               181        3625 female
 8 Adelie  Torgersen        39.2       19.6               195        4675 male  
 9 Adelie  Torgersen        34.1       18.1               193        3475 &lt;NA&gt;  
10 Adelie  Torgersen        42         20.2               190        4250 &lt;NA&gt;  
# ℹ 334 more rows
# ℹ 3 more variables: year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;, body_mass_kg &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>清晰的列名</strong>: 使用 <code>rename()</code> 将列名修改为更清晰、更具描述性的名称，提高代码可读性和数据理解度。</li>
<li><strong>统一列名风格</strong>: 在数据整合和清洗过程中，可以使用 <code>rename()</code> 统一不同数据源的列名风格，例如统一使用小写、下划线分隔等。</li>
<li><strong>避免中文列名</strong>: 虽然 R 语言支持中文列名，但英文列名在编程中更通用，可以避免编码和兼容性问题。可以使用 <code>rename()</code> 将中文列名转换为英文列名。</li>
<li><strong>不改变数据内容</strong>: <code>rename()</code> 只修改列名，不改变列的数据内容。</li>
<li><strong>配合 <code>select()</code> 使用</strong>: <code>rename()</code> 和 <code>select()</code> 经常一起使用，先用 <code>select()</code> 选择需要的列，再用 <code>rename()</code> 修改列名。</li>
</ul>
</div>
</div>
</section>
<section id="distinct-函数-去除重复行" class="level4">
<h4 class="anchored" data-anchor-id="distinct-函数-去除重复行"><code>distinct()</code> 函数： 去除重复行</h4>
<p><code>distinct()</code> 函数可以去除数据框中的重复行，只保留唯一的行。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 去除 penguins 中的重复行</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;,
#   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 基于指定列去除重复行 (例如，只考虑企鹅种类和性别)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(species, sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  species   sex   
  &lt;fct&gt;     &lt;fct&gt; 
1 Adelie    male  
2 Adelie    female
3 Adelie    &lt;NA&gt;  
4 Gentoo    female
5 Gentoo    male  
6 Gentoo    &lt;NA&gt;  
7 Chinstrap female
8 Chinstrap male  </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>去除完全重复行</strong>: 默认情况下，<code>distinct()</code> 会去除数据框中所有列值都相同的行，即完全重复的行。</li>
<li><strong>基于指定列去重</strong>: 可以使用 <code>distinct(col1, col2, ...)</code> 指定基于哪些列判断重复行。</li>
<li><strong>保留所有列</strong>: 使用 <code>.keep_all = TRUE</code> 参数可以在去重的同时保留数据框的所有列，只去除指定的重复行。</li>
<li><strong>数据清洗常用步骤</strong>: <code>distinct()</code> 是数据清洗中常用的步骤，用于去除重复数据，避免重复数据对分析结果产生干扰。</li>
<li><strong>检查去重效果</strong>: 去重后，应该检查去重后的数据行数是否符合预期，以及是否正确去除了重复行。</li>
</ul>
</div>
</div>
</section>
<section id="summarise-函数-计算汇总统计量" class="level4">
<h4 class="anchored" data-anchor-id="summarise-函数-计算汇总统计量"><code>summarise()</code> 函数： 计算汇总统计量</h4>
<p><code>summarise()</code> 函数可以对数据框进行汇总统计，计算例如均值、中位数、标准差等。通常和 <code>group_by()</code> 函数一起使用，进行分组汇总统计。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 计算所有企鹅的平均体重和体重标准差</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_mass =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_mass sd_mass
      &lt;dbl&gt;   &lt;dbl&gt;
1     4202.    802.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 分组计算：按企鹅种类计算平均体重</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_penguins =</span> <span class="fu">n</span>() <span class="co"># 统计每种类型企鹅的数量</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  species   mean_mass n_penguins
  &lt;fct&gt;         &lt;dbl&gt;      &lt;int&gt;
1 Adelie        3701.        152
2 Chinstrap     3733.         68
3 Gentoo        5076.        124</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>计算多种统计量</strong>: <code>summarise()</code> 可以同时计算多个统计量，例如均值 (<code>mean()</code>)、中位数 (<code>median()</code>)、标准差 (<code>sd()</code>)、求和 (<code>sum()</code>)、计数 (<code>n()</code>)、最小值 (<code>min()</code>)、最大值 (<code>max()</code>) 等。</li>
<li><strong>结合 <code>group_by()</code> 进行分组汇总</strong>: <code>summarise()</code> 最强大的功能是和 <code>group_by()</code> 结合使用，实现分组汇总统计，例如计算不同类别、不同组别的均值、总和等。</li>
<li><strong>自定义汇总结果的列名</strong>: 在 <code>summarise()</code> 中，可以使用 <code>列名 = 统计函数(列)</code> 的形式，自定义汇总结果的列名，使其更易于理解。</li>
<li><strong>数据探索和报告生成</strong>: <code>summarise()</code> 常用于数据探索阶段，快速了解数据的总体统计特征和分组统计特征。在生成报告时，汇总统计表格可以清晰地展示数据的主要特征。</li>
<li><strong>为可视化提供数据</strong>: <code>summarise()</code> 计算的汇总统计结果，可以作为 <code>ggplot2</code> 等可视化工具的数据来源，用于绘制柱状图、箱线图等。</li>
</ul>
</div>
</div>
</section>
<section id="group_by-函数-分组数据" class="level4">
<h4 class="anchored" data-anchor-id="group_by-函数-分组数据"><code>group_by()</code> 函数： 分组数据</h4>
<p><code>group_by()</code> 函数可以将数据框按照指定的列进行分组，后续的 <code>summarise()</code>, <code>mutate()</code> 等操作会在每个分组内进行。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 按企鹅种类分组</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
# Groups:   species [3]
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;,
#   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 按企鹅种类和性别分组</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
# Groups:   species, sex [8]
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, weight_length_ratio &lt;dbl&gt;,
#   body_mass_kg &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>单列分组和多列分组</strong>: <code>group_by()</code> 可以指定一个或多个列进行分组，实现单层分组和多层分组。</li>
<li><strong>分组后进行汇总统计</strong>: <code>group_by()</code> 最常用的场景是和 <code>summarise()</code> 结合使用，进行分组汇总统计。</li>
<li><strong>分组后进行mutate操作</strong>: <code>group_by()</code> 也可以和 <code>mutate()</code> 结合使用，在每个分组内进行数据转换和衍生。例如，计算每个电影类型内的评分排名。</li>
<li><strong>取消分组</strong>: 使用 <code>ungroup()</code> 函数可以取消分组状态，将数据框恢复为未分组状态。</li>
<li><strong>分组操作的顺序</strong>: <code>group_by()</code> 操作通常放在数据处理流程的早期，为后续的分组汇总、分组转换等操作做准备。</li>
<li><strong>分组变量的选择</strong>: 选择合适的分组变量非常重要，分组变量应该能够有效区分不同的数据子集，并有助于发现数据中的模式和规律。</li>
</ul>
</div>
</div>
</section>
<section id="管道操作符-的深入应用" class="level4">
<h4 class="anchored" data-anchor-id="管道操作符-的深入应用">管道操作符 <code>%&gt;%</code> 的深入应用</h4>
<p>管道操作符 <code>%&gt;%</code> 是 <code>tidyverse</code> 系列包的核心特色之一，它可以将多个函数调用连接起来，使代码从左向右、从上向下流动，更加符合人的阅读习惯，也更易于理解和维护。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 链式操作示例：</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. 选择种类、体重和嘴峰长度列</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 筛选体重大于 4000g 的企鹅</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. 按企鹅种类分组</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. 汇总计算每种类型企鹅的平均体重和数量</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g, bill_length_mm) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(body_mass_g <span class="sc">&gt;</span> <span class="dv">4000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_penguins =</span> <span class="fu">n</span>()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  species   mean_mass n_penguins
  &lt;fct&gt;         &lt;dbl&gt;      &lt;int&gt;
1 Adelie        4346.         35
2 Chinstrap     4267.         15
3 Gentoo        5085.        122</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>提高代码可读性</strong>: 使用管道操作符 <code>%&gt;%</code> 可以将复杂的数据处理流程分解为一系列简单的步骤，每一步都清晰可见，代码更易于阅读和理解。</li>
<li><strong>减少中间变量</strong>: 使用管道操作符 <code>%&gt;%</code> 可以避免创建大量的中间变量，使代码更简洁。</li>
<li><strong>链式调用多个函数</strong>: 管道操作符 <code>%&gt;%</code> 可以连接任意多个 <code>dplyr</code> 函数，以及其他 R 包的函数，实现复杂的数据处理流程。</li>
<li><strong>从左向右、从上向下</strong>: 管道操作符 <code>%&gt;%</code> 让代码的执行顺序从左向右、从上向下，更符合人的思维习惯。</li>
<li><strong>易于调试和维护</strong>: 使用管道操作符 <code>%&gt;%</code> 组织的代码，更易于调试和维护，每一步操作都是独立的，可以单独测试和修改。</li>
<li><strong>与其他 tidyverse 包协同工作</strong>: 管道操作符 <code>%&gt;%</code> 是 <code>tidyverse</code> 系列包的通用操作符，可以与 <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code> 等包的函数无缝衔接，构建完整的数据分析流程。</li>
</ul>
</div>
</div>
</section>
<section id="tidyr-包数据整理" class="level3">
<h3 class="anchored" data-anchor-id="tidyr-包数据整理"><code>tidyr</code> 包：数据整理</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>tidyr</code> 包：数据整理
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>tidyr</code> 包是 <code>tidyverse</code> 生态系统中专门用于数据整理的包。数据整理 (Data Wrangling/Data Reshaping) 是指将数据从一种格式转换为另一种格式，使其更适合分析和可视化。<code>tidyr</code> 包主要解决 “tidy data” (整洁数据) 的问题。</p>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
“Tidy Data” 的概念
</div>
</div>
<div class="callout-body-container callout-body">
<p>“Tidy Data” (整洁数据) 是一种规范的数据组织形式，它具有以下三个核心原则：</p>
<ol type="1">
<li><strong>每一列是一个变量 (variable)</strong>。</li>
<li><strong>每一行是一个观测 (observation)</strong>。</li>
<li><strong>每个单元格是一个值 (value)</strong>。</li>
</ol>
<p>简单来说，“tidy data” 就是我们通常说的<strong>规范化的表格数据</strong>，每一列代表一个属性，每一行代表一个记录。</p>
</div>
</div>
<section id="pivot_longer-函数-宽格式转长格式" class="level4">
<h4 class="anchored" data-anchor-id="pivot_longer-函数-宽格式转长格式"><code>pivot_longer()</code> 函数： 宽格式转长格式</h4>
<p><code>pivot_longer()</code> 函数可以将<strong>宽格式 (wide format)</strong> 的数据转换为<strong>长格式 (long format)</strong> 的数据。</p>
<ul>
<li><strong>宽格式数据</strong>: 有些列名本身不是变量名，而是变量的取值，这种数据格式称为宽格式。例如，一份学生成绩单，列名可能是 “语文成绩”, “数学成绩”, “英语成绩” 等，这些列名 “语文”, “数学”, “英语” 实际上是 “科目” 变量的取值。</li>
<li><strong>长格式数据</strong>: 将宽格式数据转换为长格式后，原来的列名会变成一个新的变量 (例如 “科目” 变量)，原来的列值会变成一个新的变量 (例如 “成绩” 变量)。长格式数据更符合 “tidy data” 的规范。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 示例数据：宽格式的学生成绩数据</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>wide_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  姓名 <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"小明"</span>, <span class="st">"小红"</span>),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  语文成绩 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">90</span>),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  数学成绩 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">92</span>),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  英语成绩 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">78</span>, <span class="dv">88</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 pivot_longer() 将宽格式数据转换为长格式</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>long_data <span class="ot">&lt;-</span> wide_data <span class="sc">%&gt;%</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(语文成绩, 数学成绩, 英语成绩), <span class="co"># 指定要转换的列</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"科目"</span>,        <span class="co"># 转换后的列名，存储原来的列名 (语文成绩, 数学成绩, 英语成绩)</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"成绩"</span>       <span class="co"># 转换后的列名，存储原来的列值 (80, 90, 85, 92, 78, 88)</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>long_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  姓名  科目      成绩
  &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
1 小明  语文成绩    80
2 小明  数学成绩    85
3 小明  英语成绩    78
4 小红  语文成绩    90
5 小红  数学成绩    92
6 小红  英语成绩    88</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>指定要转换的列</strong>: 使用 <code>cols</code> 参数指定要从宽格式转换为长格式的列。可以使用列名向量、列名选择函数 (例如 <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>) 等灵活选择。</li>
<li><strong>命名新变量</strong>: 使用 <code>names_to</code> 参数指定转换后存储原列名的变量名，使用 <code>values_to</code> 参数指定转换后存储原列值的变量名。</li>
<li><strong>处理多列</strong>: <code>pivot_longer()</code> 可以同时处理多列，将多组宽格式列转换为长格式。</li>
<li><strong>数据分析和可视化准备</strong>: 长格式数据更适合进行数据分析和可视化，例如使用 <code>ggplot2</code> 绘制不同科目的成绩比较图。</li>
<li><strong>与 <code>pivot_wider()</code> 函数配合使用</strong>: <code>pivot_longer()</code> 和 <code>pivot_wider()</code> 是一对互逆的函数，可以灵活地在宽格式和长格式之间转换数据。</li>
</ul>
</div>
</div>
</section>
<section id="pivot_wider-函数-长格式转宽格式" class="level4">
<h4 class="anchored" data-anchor-id="pivot_wider-函数-长格式转宽格式"><code>pivot_wider()</code> 函数： 长格式转宽格式</h4>
<p><code>pivot_wider()</code> 函数可以将<strong>长格式 (long format)</strong> 的数据转换为<strong>宽格式 (wide format)</strong> 的数据，是 <code>pivot_longer()</code> 函数的逆操作。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 示例数据：长格式的学生成绩数据 (上例转换后的 long_data)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 pivot_wider() 将长格式数据转换为宽格式</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>long_data <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="st">"科目"</span>,      <span class="co"># 指定列名来源，科目列的取值 (语文, 数学, 英语) 将作为新的列名</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="st">"成绩"</span>     <span class="co"># 指定列值来源，成绩列的值将作为新列的值</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  姓名  语文成绩 数学成绩 英语成绩
  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 小明        80       85       78
2 小红        90       92       88</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>指定列名和列值来源</strong>: 使用 <code>names_from</code> 参数指定从哪一列获取新的列名，使用 <code>values_from</code> 参数指定从哪一列获取新列的值。</li>
<li><strong>处理多行</strong>: 当长格式数据中，相同的观测 (由其他列唯一确定) 对应多行数据时，<code>pivot_wider()</code> 可以将多行数据合并为一行，并将不同的值分别放入不同的列中。</li>
<li><strong>数据格式转换</strong>: <code>pivot_wider()</code> 常用于将数据转换为特定的格式，以满足特定的分析或可视化需求。</li>
<li><strong>与 <code>pivot_longer()</code> 函数配合使用</strong>: <code>pivot_longer()</code> 和 <code>pivot_wider()</code> 是一对互逆的函数，可以灵活地在宽格式和长格式之间转换数据。</li>
</ul>
</div>
</div>
</section>
<section id="separate-函数-将一列拆分成多列" class="level4">
<h4 class="anchored" data-anchor-id="separate-函数-将一列拆分成多列"><code>separate()</code> 函数： 将一列拆分成多列</h4>
<p><code>separate()</code> 函数可以将<strong>一列按照指定的分隔符拆分成多列</strong>。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 示例数据：包含 "年份-月份-日期" 格式日期的列</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>date_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  日期 <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"2023-10-26"</span>, <span class="st">"2023-10-27"</span>, <span class="st">"2023-10-28"</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">110</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 separate() 将 "日期" 列拆分成 "年份", "月份", "日期" 三列</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>separated_data <span class="ot">&lt;-</span>date_data <span class="sc">%&gt;%</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> 日期,          <span class="co"># 指定要拆分的列</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"年份"</span>, <span class="st">"月份"</span>, <span class="st">"日期"</span>), <span class="co"># 拆分后的新列名</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"-"</span>           <span class="co"># 分隔符为 "-"</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>separated_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  年份 月份 日期 value
1 2023   10   26   100
2 2023   10   27   120
3 2023   10   28   110</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>指定分隔符</strong>: 使用 <code>sep</code> 参数指定分隔符，可以是字符、正则表达式等。</li>
<li><strong>命名新列</strong>: 使用 <code>into</code> 参数指定拆分后的新列名，需要提供一个字符向量，向量的长度应该等于拆分后的列数。</li>
<li><strong>处理多种分隔符</strong>: <code>separate()</code> 可以处理多种分隔符，例如空格、逗号、下划线等。</li>
<li><strong>数据清洗和特征工程</strong>: <code>separate()</code> 常用于数据清洗和特征工程，例如将日期时间列拆分成年、月、日、时、分、秒等，提取地址中的省、市、区等信息。</li>
<li><strong>与 <code>unite()</code> 函数配合使用</strong>: <code>separate()</code> 和 <code>unite()</code> 是一对互逆的函数，<code>separate()</code> 拆分列，<code>unite()</code> 合并列。</li>
</ul>
</div>
</div>
</section>
<section id="unite-函数-将多列合并成一列" class="level4">
<h4 class="anchored" data-anchor-id="unite-函数-将多列合并成一列"><code>unite()</code> 函数： 将多列合并成一列</h4>
<p><code>unite()</code> 函数可以将<strong>多列按照指定的分隔符合并成一列</strong>，是 <code>separate()</code> 函数的逆操作。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 示例数据：包含 "年份", "月份", "日期" 列的数据 (上例拆分后的 separated_data)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 unite() 将 "年份", "月份", "日期" 三列合并成 "完整日期" 列</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>separated_data <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> 完整日期,       <span class="co"># 合并后的新列名</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    年份, 月份, 日期,      <span class="co"># 要合并的列</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"-"</span>           <span class="co"># 分隔符为 "-"</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    完整日期 value
1 2023-10-26   100
2 2023-10-27   120
3 2023-10-28   110</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>指定分隔符</strong>: 使用 <code>sep</code> 参数指定合并时使用的分隔符。</li>
<li><strong>命名新列</strong>: 使用 <code>col</code> 参数指定合并后的新列名。</li>
<li><strong>选择要合并的列</strong>: 在 <code>unite()</code> 函数中，直接列出要合并的列名即可。</li>
<li><strong>数据格式转换</strong>: <code>unite()</code> 常用于将多列合并成一列，例如将年、月、日合并成日期列，将省、市、区合并成地址列。</li>
<li><strong>与 <code>separate()</code> 函数配合使用</strong>: <code>separate()</code> 和 <code>unite()</code> 是一对互逆的函数，<code>separate()</code> 拆分列，<code>unite()</code> 合并列。</li>
</ul>
</div>
</div>
</section>
</section>
<section id="ggplot2-包数据可视化初步" class="level3">
<h3 class="anchored" data-anchor-id="ggplot2-包数据可视化初步"><code>ggplot2</code> 包：数据可视化初步</h3>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>ggplot2</code> 包：数据可视化初步
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ggplot2</code> 包是 <code>tidyverse</code> 生态系统中用于数据可视化的核心包，也是 R 语言中最强大、最流行的可视化包之一。<code>ggplot2</code> 基于 <strong>“图形语法” (Grammar of Graphics)</strong> 理论，提供了一套灵活、强大、美观的数据可视化方案。</p>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>ggplot2</code> 的基本语法结构
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ggplot2</code> 的图形由<strong>图层 (layer)</strong> 构成，每个图层包含<strong>数据 (data)</strong>、<strong>映射 (mapping)</strong> 和<strong>几何对象 (geom)</strong> 三个基本要素。</p>
<ul>
<li><strong>数据 (data)</strong>： 要可视化的数据，通常是一个数据框。</li>
<li><strong>映射 (mapping)</strong>： 使用 <code>aes()</code> 函数将数据中的变量<strong>映射</strong>到图形的<strong>视觉属性 (aesthetic)</strong>，例如 x 轴位置、y 轴位置、颜色、大小、形状等。</li>
<li><strong>几何对象 (geom)</strong>： 决定<strong>图形的类型</strong>，例如散点图 (<code>geom_point()</code>)、直方图 (<code>geom_histogram()</code>)、箱线图 (<code>geom_boxplot()</code>)、柱状图 (<code>geom_bar()</code>)、折线图 (<code>geom_line()</code>) 等。</li>
</ul>
</div>
</div>
<section id="常用几何对象" class="level4">
<h4 class="anchored" data-anchor-id="常用几何对象">常用几何对象</h4>
<ul>
<li><p><strong><code>geom_histogram()</code> (直方图)</strong>： <strong>展示数值变量的分布</strong>。将数值变量的值域划分为若干个区间 (bin)，统计每个区间内的数据频数，用柱形的高度表示频数。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"企鹅体重分布"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"基于Palmer Penguins数据集"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"频数"</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div></li>
<li><p><strong><code>geom_point()</code> (散点图)</strong>： <strong>展示两个数值变量之间的关系</strong>。用点的 x 轴和 y 轴位置表示两个变量的值。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> custom_colors,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"阿德利企鹅"</span>, <span class="st">"帽带企鹅"</span>, <span class="st">"巴布亚企鹅"</span>)) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"企鹅嘴峰长度与体重的关系"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"按企鹅种类分类"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"嘴峰长度 (mm)"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div></li>
<li><p><strong><code>geom_boxplot()</code> (箱线图)</strong>： <strong>展示数值变量在不同组别的分布</strong>，<strong>检测异常值</strong>。箱线图用箱子和须线展示数据的四分位数、中位数、上下限等信息，可以直观地比较不同组别数据的分布差异，并识别潜在的异常值。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"阿德利企鹅"</span>, <span class="st">"帽带企鹅"</span>, <span class="st">"巴布亚企鹅"</span>)) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"不同种类企鹅的体重分布"</span>,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"使用箱线图展示"</span>,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"企鹅种类"</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div></li>
</ul>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
基本图形属性设置
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>颜色 (color, fill)</strong>：</p>
<ul>
<li><code>color</code> 属性： 通常用于设置<strong>线条、点、边框</strong>的颜色。</li>
<li><code>fill</code> 属性： 通常用于设置<strong>填充区域</strong>的颜色，例如柱子、箱子、多边形等。</li>
<li>可以在 <code>geom_xxx()</code> 函数中直接设置固定颜色值 (例如 <code>color = "red"</code>, <code>fill = "blue"</code>)，也可以在 <code>aes()</code> 函数中将颜色属性<strong>映射</strong>到数据变量 (例如 <code>aes(color = species)</code>, <code>aes(fill = species)</code>)，让颜色<strong>根据数据变量的取值而变化</strong>。</li>
</ul></li>
<li><p><strong>大小 (size)</strong>： 设置<strong>点的大小、线条的粗细</strong>等。可以在 <code>geom_xxx()</code> 函数中直接设置固定大小值 (例如 <code>size = 3</code>)，也可以在 <code>aes()</code> 函数中将大小属性<strong>映射</strong>到数据变量 (例如 <code>aes(size = body_mass_g)</code>)，让大小<strong>根据数据变量的取值而变化</strong>。</p></li>
<li><p><strong>形状 (shape)</strong>： 设置<strong>点的形状</strong>。<code>ggplot2</code> 提供了多种点的形状，可以通过数字或形状名称指定 (例如 <code>shape = 16</code> 或 <code>shape = "circle"</code>). 可以在 <code>geom_point()</code> 函数中直接设置固定形状值 (例如 <code>shape = 16</code>)，也可以在 <code>aes()</code> 函数中将形状属性<strong>映射</strong>到数据变量 (例如 <code>aes(shape = species)</code>)，让形状<strong>根据数据变量的取值而变化</strong>。</p></li>
<li><p><strong>透明度 (alpha)</strong>： 设置<strong>图形的透明度</strong>，取值范围为 0-1，越小越透明。可以用于<strong>处理数据重叠</strong>的问题，例如在散点图中，当数据点重叠较多时，可以降低透明度，使图形更清晰。可以在 <code>geom_xxx()</code> 函数中直接设置固定透明度值 (例如 <code>alpha = 0.5</code>)。</p></li>
</ul>
</div>
</div>
</section>
<section id="演示使用-ggplot2-绘制基本图表" class="level4">
<h4 class="anchored" data-anchor-id="演示使用-ggplot2-绘制基本图表">演示：使用 <code>ggplot2</code> 绘制基本图表</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. 直方图：展示企鹅体重的分布</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"企鹅体重分布"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"基于Palmer Penguins数据集"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"频数"</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 散点图：展示企鹅嘴峰长度和体重的关系</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> custom_colors,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"阿德利企鹅"</span>, <span class="st">"帽带企鹅"</span>, <span class="st">"巴布亚企鹅"</span>)) <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"企鹅嘴峰长度与体重的关系"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"按企鹅种类分类"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"嘴峰长度 (mm)"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. 箱线图：比较不同种类企鹅的体重分布</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"阿德利企鹅"</span>, <span class="st">"帽带企鹅"</span>, <span class="st">"巴布亚企鹅"</span>)) <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"不同种类企鹅的体重分布"</span>,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"使用箱线图展示"</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"企鹅种类"</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-15-3.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
数据可视化练习
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>练习任务</strong>：
<ol type="1">
<li>使用 <code>ggplot2</code> 包，选择合适的可视化方法 (直方图、散点图、箱线图)，对示例数据进行可视化探索。</li>
</ol></li>
<li><strong>尝试调整图形属性</strong> (颜色、标题、标签等)，美化图形 (这部分下节课会详细介绍)。</li>
<li><strong>鼓励使用 AI 工具 (Cursor) 辅助 <code>ggplot2</code> 代码编写和图形美化</strong>。 例如，让 AI 生成绘制特定类型图形的 <code>ggplot2</code> 代码，或者提供美化图形的建议。</li>
</ul>
</div>
</div>
</section>
</section>
</section>
<section id="第六次课可视化进阶数据探索与可视化综合应用" class="level2">
<h2 class="anchored" data-anchor-id="第六次课可视化进阶数据探索与可视化综合应用">第六次课：可视化进阶、数据探索与可视化综合应用</h2>
<section id="ggplot2-包数据可视化进阶" class="level3">
<h3 class="anchored" data-anchor-id="ggplot2-包数据可视化进阶"><code>ggplot2</code> 包：数据可视化进阶</h3>
<p>在第五次课，我们学习了 <code>ggplot2</code> 的基本语法和常用几何对象。为了创建更精美、更信息丰富的可视化图表，我们还需要学习 <code>ggplot2</code> 的更多高级功能。</p>
<section id="图例和轴标签设置-labs-函数" class="level4">
<h4 class="anchored" data-anchor-id="图例和轴标签设置-labs-函数">图例和轴标签设置： <code>labs()</code> 函数</h4>
<p><code>labs()</code> 函数用于<strong>设置图形的各种标签</strong>，包括<strong>标题 (title)</strong>、<strong>副标题 (subtitle)</strong>、<strong>坐标轴标签 (x 轴和 y 轴)</strong>、<strong>图例标题 (legend title)</strong> 等。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"企鹅嘴峰长度与体重的关系"</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"不同种类企鹅的散点图"</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"嘴峰长度 (mm)"</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="主题设置-theme_xxx-函数和-theme-函数" class="level4">
<h4 class="anchored" data-anchor-id="主题设置-theme_xxx-函数和-theme-函数">主题设置： <code>theme_xxx()</code> 函数和 <code>theme()</code> 函数</h4>
<p><code>ggplot2</code> 提供了<strong>主题 (theme)</strong> 系统，用于<strong>控制图形的整体外观风格</strong>，例如背景颜色、网格线、字体、字号、边框、图例位置等。</p>
<ul>
<li><p><strong>预设主题： <code>theme_xxx()</code> 函数</strong>: <code>ggplot2</code> 内置了一些<strong>预设主题</strong>，例如 <code>theme_minimal()</code>, <code>theme_bw()</code>, <code>theme_classic()</code>, <code>theme_void()</code> 等。这些预设主题提供了不同的视觉风格，可以快速改变图形的整体外观。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="co"># 使用 minimal 主题</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div></li>
<li><p><strong>自定义主题： <code>theme()</code> 函数</strong>: <code>theme()</code> 函数允许<strong>用户自定义主题的各个元素</strong>，例如背景、面板、坐标轴、网格线、文本、图例等。通过 <code>theme()</code> 函数，可以<strong>精细地控制图形的每一个细节</strong>，实现高度定制化的可视化效果。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>), <span class="co"># 设置背景颜色</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>), <span class="co"># 设置 x 轴主要网格线</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>) <span class="co"># 设置 x 轴刻度标签角度</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div></li>
</ul>
</section>
<section id="刻度设置-scale_x_xxx-和-scale_y_xxx-函数" class="level4">
<h4 class="anchored" data-anchor-id="刻度设置-scale_x_xxx-和-scale_y_xxx-函数">刻度设置： <code>scale_x_xxx()</code> 和 <code>scale_y_xxx()</code> 函数</h4>
<p><code>scale_x_xxx()</code> 和 <code>scale_y_xxx()</code> 函数用于<strong>设置 x 轴和 y 轴的刻度</strong>，包括<strong>刻度范围</strong>、<strong>刻度标签</strong>、<strong>刻度格式</strong>等。</p>
<ul>
<li><strong>常用刻度函数</strong>:
<ul>
<li><code>scale_x_continuous()</code>, <code>scale_y_continuous()</code>: <strong>连续型刻度</strong>，用于数值型变量。</li>
<li><code>scale_x_discrete()</code>, <code>scale_y_discrete()</code>: <strong>离散型刻度</strong>，用于分类型变量。</li>
<li><code>scale_x_log10()</code>, <code>scale_y_log10()</code>: <strong>对数刻度</strong>，用于展示数据跨度较大的数据。</li>
<li><code>scale_x_date()</code>, <code>scale_y_date()</code>: <strong>日期刻度</strong>，用于日期型变量。</li>
<li><code>scale_x_datetime()</code>, <code>scale_y_datetime()</code>: <strong>日期时间刻度</strong>，用于日期时间型变量。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="co"># 设置 x 轴为对数刻度，并使用逗号分隔的标签格式</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><code>labels</code> 参数： 设置刻度标签的格式，可以使用 <code>scales</code> 包提供的格式化函数，例如 <code>scales::comma</code> (逗号分隔), <code>scales::percent</code> (百分比格式) 等。</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>调整刻度范围</strong>: 使用 <code>limits</code> 参数可以调整刻度的显示范围，例如 <code>scale_x_continuous(limits = c(0, 10000))</code>。</li>
<li><strong>自定义刻度标签</strong>: 使用 <code>labels</code> 参数可以自定义刻度标签的文本内容，例如 <code>scale_x_continuous(labels = c("Low", "Medium", "High"))</code>。</li>
<li><strong>设置刻度格式</strong>: 使用 <code>labels</code> 参数和 <code>scales</code> 包提供的格式化函数，可以设置刻度标签的显示格式，例如逗号分隔、百分比、货币符号等。</li>
<li><strong>使用对数刻度</strong>: 当数据跨度较大，或数据分布偏斜时，可以考虑使用对数刻度，使图形更易于阅读和理解。</li>
<li><strong>日期时间刻度</strong>: 对于日期时间型变量，应使用日期时间刻度函数，例如 <code>scale_x_date()</code>, <code>scale_x_datetime()</code>，<code>ggplot2</code> 会自动处理日期时间的刻度显示。</li>
</ul>
</div>
</div>
</section>
<section id="分面图-facet_wrap-和-facet_grid-函数" class="level4">
<h4 class="anchored" data-anchor-id="分面图-facet_wrap-和-facet_grid-函数">分面图： <code>facet_wrap()</code> 和 <code>facet_grid()</code> 函数</h4>
<p><strong>分面 (facet)</strong> 是将<strong>数据按照一个或多个分类变量分组</strong>，<strong>为每个分组绘制一个子图</strong>，并将所有子图<strong>排列在一个页面</strong>上。分面图可以有效地<strong>展示不同分组数据的分布或关系</strong>，便于<strong>比较不同组别之间的差异</strong>。</p>
<ul>
<li><p><strong><code>facet_wrap()</code> 函数</strong>: <strong>单变量分面</strong>，将数据按照一个分类变量分组，并将子图<strong>按行或按列排列</strong> (通常是按行排列，自动换行)。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> species, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="co"># 按企鹅种类分面，每行 2 个子图</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><code>~ species</code>： 分面公式，<code>~</code> 符号后面跟分类变量名。</li>
<li><code>ncol</code> 参数： 设置每行子图的数量。</li>
</ul></li>
<li><p><strong><code>facet_grid()</code> 函数</strong>: <strong>双变量分面</strong>，可以将数据按照<strong>两个分类变量</strong>分组，<strong>行和列分别对应一个分类变量</strong>，形成<strong>网格状</strong>的分面图。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(species <span class="sc">~</span> sex) <span class="co"># 按企鹅种类 (行) 和性别分组 (列) 分面</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><code>species ~ sex</code>： 分面公式，<code>~</code> 符号左边是行分面变量，右边是列分面变量。</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>选择合适的分面变量</strong>: 分面变量应选择能够有效区分不同数据子集的分类变量，例如类别、组别、时间段等。</li>
<li><strong>控制分面数量</strong>: 分面数量不宜过多，否则子图会变得太小，难以阅读。通常情况下，分面数量控制在 10-20 个以内为宜。</li>
<li><strong>结合几何对象和图形属性</strong>: 分面图可以和各种几何对象 (例如直方图、散点图、箱线图) 和图形属性 (例如颜色、形状、大小) 结合使用，展示更丰富的数据信息。</li>
<li><strong>比较不同分组数据</strong>: 分面图最主要的应用场景是比较不同分组数据的分布或关系，例如比较不同类别产品的销售额分布、不同地区人群的收入水平等。</li>
<li><strong>探索多维数据</strong>: 分面图可以将多维数据 (例如包含多个分类变量的数据) 降维到二维平面上进行可视化，便于探索多维数据中的模式和规律。</li>
</ul>
</div>
</div>
</section>
<section id="统计变换stat_summary-和-stat_smooth-函数" class="level4">
<h4 class="anchored" data-anchor-id="统计变换stat_summary-和-stat_smooth-函数">统计变换：<code>stat_summary()</code> 和 <code>stat_smooth()</code> 函数</h4>
<p><code>ggplot2</code> 提供了多种统计变换函数，用于在图形中<strong>添加统计信息</strong>，如<strong>统计摘要</strong>、<strong>平滑曲线</strong>等。这些函数以 <code>stat_</code> 开头，可以与几何对象结合使用。</p>
<ul>
<li><strong><code>stat_summary()</code> 函数</strong>：用于在图形中添加统计摘要信息，如均值、中位数等。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>选择合适的统计函数</strong>: <code>fun</code> 参数允许你指定任何统计函数，例如 <code>mean</code> (均值), <code>median</code> (中位数), <code>sd</code> (标准差), <code>IQR</code> (四分位距) 等。你也可以自定义函数来计算更复杂的统计量。</li>
<li><strong>选择合适的几何对象</strong>: <code>geom</code> 参数决定了统计摘要的展示形式。常用的几何对象包括：
<ul>
<li><code>"point"</code>: 用点表示均值或中位数等。</li>
<li><code>"errorbar"</code>: 添加误差线，展示数据的变异性 (例如标准差)。</li>
<li><code>"crossbar"</code>: 用带中心横线的柱状图表示均值和置信区间。</li>
<li><code>"boxplot"</code>: 绘制箱线图 (实际上 <code>geom_boxplot()</code> 已经做了统计摘要，但 <code>stat_summary(geom = "boxplot")</code> 也是可以的)。</li>
<li><code>"line"</code> 或 <code>"path"</code>: 连接不同组别的统计量，展示趋势。</li>
</ul></li>
<li><strong>自定义外观</strong>: 你可以使用 <code>color</code>, <code>size</code>, <code>shape</code>, <code>linetype</code>, <code>fill</code> 等图形属性来自定义统计摘要的外观，使其更符合你的需求。</li>
<li><strong>分组统计</strong>: <code>stat_summary()</code> 会自动根据图形的分组 (例如通过 <code>aes(color = ...)</code> 或 <code>facet_wrap()</code>) 进行分组统计，分别计算每个组的统计摘要。</li>
<li><strong>添加多个统计量</strong>: 你可以多次调用 <code>stat_summary()</code> 函数，添加多个不同的统计量，例如同时展示均值和中位数。</li>
<li><strong>结合其他几何对象</strong>: <code>stat_summary()</code> 可以和各种几何对象结合使用，例如在散点图上添加均值点，在箱线图上标记均值点等。</li>
</ul>
</div>
</div>
<ul>
<li><strong><code>stat_smooth()</code> 函数</strong>：用于在散点图中添加平滑曲线，展示变量间的趋势关系。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="co"># 添加 LOESS 平滑曲线</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
使用技巧
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>选择合适的平滑方法</strong>: <code>method</code> 参数可以选择不同的平滑方法，例如 <code>"loess"</code> (局部加权回归，默认方法，适合非线性关系), <code>"lm"</code> (线性回归，适合线性关系), <code>"glm"</code> (广义线性模型), <code>"gam"</code> (广义加法模型) 等。根据数据的特点和分析目的选择合适的平滑方法。</li>
<li><strong>调整平滑程度</strong>: 对于 <code>"loess"</code> 方法，<code>span</code> 参数可以控制平滑程度，取值范围为 0-1，越小越灵活 (曲线越弯曲)，越大越平滑。</li>
<li><strong>添加置信区间</strong>: <code>se = TRUE</code> (默认值) 会在平滑曲线周围添加置信区间阴影，展示平滑估计的不确定性。<code>se = FALSE</code> 则不显示置信区间。</li>
<li><strong>分组平滑</strong>: <code>stat_smooth()</code> 会自动根据图形的分组 (例如通过 <code>aes(color = ...)</code> 或 <code>group = ...)</code> 分组) 进行分组平滑，分别拟合每个组的平滑曲线。</li>
<li><strong>自定义外观</strong>: 可以使用 <code>color</code>, <code>linetype</code>, <code>size</code> 等图形属性来自定义平滑曲线和置信区间的颜色、线型、粗细等外观，使其更符合你的需求。</li>
<li><strong>理解平滑曲线的含义</strong>: 平滑曲线展示的是数据的大致趋势和模式，帮助我们发现变量之间的潜在关系。但需要注意，平滑曲线并不代表真实的函数关系，只是一种数据趋势的近似展示。</li>
<li><strong>与其他几何对象结合</strong>: <code>stat_smooth()</code> 通常与 <code>geom_point()</code> 结合使用，在散点图的基础上添加平滑曲线，更清晰地展示变量之间的关系。</li>
</ul>
</div>
</div>
</section>
</section>
<section id="tidyverse-生态数据处理和可视化的综合应用" class="level3">
<h3 class="anchored" data-anchor-id="tidyverse-生态数据处理和可视化的综合应用">tidyverse 生态：数据处理和可视化的综合应用</h3>
<section id="案例企鹅数据分析" class="level4">
<h4 class="anchored" data-anchor-id="案例企鹅数据分析">案例：企鹅数据分析</h4>
<p>让我们通过一个完整的案例，展示如何使用 <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code> 进行数据探索和可视化分析。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. 数据清洗和预处理</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 选择需要的列</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, bill_length_mm, bill_depth_mm, body_mass_g, sex) <span class="sc">%&gt;%</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 去除缺失值</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(bill_length_mm), <span class="sc">!</span><span class="fu">is.na</span>(body_mass_g), <span class="sc">!</span><span class="fu">is.na</span>(sex))</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 按种类和性别统计平均体征</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>species_sex_stats <span class="ot">&lt;-</span> penguins_clean <span class="sc">%&gt;%</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_body_mass =</span> <span class="fu">mean</span>(body_mass_g),</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_penguins =</span> <span class="fu">n</span>()</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. 可视化展示</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.1 不同种类企鹅的体重分布</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins_clean, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"不同种类企鹅的体重分布"</span>,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"企鹅种类"</span>,</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.2 不同种类企鹅的嘴峰长度和体重关系</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins_clean, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> species, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"不同种类企鹅的嘴峰长度和体重关系"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"嘴峰长度 (mm)"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"体重 (g)"</span>,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"企鹅种类"</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week3_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid figure-img" width="2400"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="数据探索与可视化练习" class="level3">
<h3 class="anchored" data-anchor-id="数据探索与可视化练习">数据探索与可视化练习</h3>
<ul>
<li><strong>练习任务</strong>：
<ol type="1">
<li>使用 <code>dplyr</code> 和 <code>tidyr</code> 对数据进行清洗和整理</li>
<li>使用 <code>ggplot2</code> 创建至少三种不同类型的可视化图表</li>
<li>尝试使用 <code>ggplot2</code> 的高级功能美化图表</li>
<li>探索数据中的有趣模式和规律</li>
</ol></li>
<li><strong>建议探索方向</strong>：
<ul>
<li>分析不同类型企鹅的体重分布和趋势</li>
<li>探索体重与其他变量 (如嘴峰长度、性别) 的关系</li>
<li>研究企鹅种类随时间的变化趋势</li>
</ul></li>
<li><strong>鼓励使用 AI 工具 (Cursor) 辅助</strong>：
<ul>
<li>生成数据处理和可视化代码</li>
<li>优化图表美化方案</li>
<li>解释发现的数据模式</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
课后作业 (第三周)
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong>继续深入探索自己项目的数据集</strong>：
<ul>
<li>使用 <code>dplyr</code>, <code>tidyr</code> 进行数据清洗和整理</li>
<li>处理缺失值、异常值等数据质量问题</li>
<li>创建新的变量，进行必要的数据转换</li>
</ul></li>
<li><strong>使用 <code>ggplot2</code> 包进行可视化探索</strong>：
<ul>
<li>选择合适的图表类型，展示数据的分布和关系</li>
<li>使用分面图比较不同组别的数据特征</li>
<li>添加统计信息，如均值线、趋势线等</li>
<li>美化图表，添加标题、标签、调整主题等</li>
</ul></li>
<li><strong>撰写项目一的初步分析报告</strong>，包括：
<ul>
<li>项目主题和目标</li>
<li>数据来源和描述</li>
<li>数据清洗和预处理步骤</li>
<li>数据探索和可视化结果</li>
<li>初步的发现和洞察</li>
</ul></li>
<li><strong>思考题</strong>：
<ul>
<li>通过数据探索和可视化，你发现了哪些有趣的模式或规律？</li>
<li>这些发现对你的研究问题有什么启示？</li>
<li>还有哪些方面需要进一步分析？</li>
</ul></li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
AI 辅助学习建议 (第三周)
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>数据清洗和整理</strong>：
<ul>
<li>让 AI 生成 <code>dplyr</code> 和 <code>tidyr</code> 代码</li>
<li>请 AI 解释数据转换的逻辑</li>
<li>使用 AI 检查数据质量问题</li>
</ul></li>
<li><strong>数据可视化</strong>：
<ul>
<li>让 AI 推荐适合的图表类型</li>
<li>请 AI 生成 <code>ggplot2</code> 代码</li>
<li>使用 AI 优化图表美化方案</li>
</ul></li>
<li><strong>数据分析报告</strong>：
<ul>
<li>让 AI 帮助组织报告结构</li>
<li>请 AI 解释数据发现的含义</li>
<li>使用 AI 改进报告的表达</li>
</ul></li>
</ul>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week2.html" class="pagination-link" aria-label="第二周：R语言数据导入与数据初步理解">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">第二周：R语言数据导入与数据初步理解</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week4.html" class="pagination-link" aria-label="第四周：推断性统计初步：参数估计与假设检验">
        <span class="nav-page-text"><span class="chapter-title">第四周：推断性统计初步：参数估计与假设检验</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>